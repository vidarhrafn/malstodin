<!DOCTYPE html>
<html lang="is">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üé® Teiknileikur - Pictionary</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      background: linear-gradient(to bottom, #f8f7f4 0%, #e8e6e1 100%);
      min-height: 100vh;
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const WORDS = [
      // Au√∞veld
      { word: 'kj√∫klingur', difficulty: 'easy' },
      { word: 'laukur', difficulty: 'easy' },
      { word: 'pizza', difficulty: 'easy' },
      { word: 'nammi', difficulty: 'easy' },
      { word: 'popp', difficulty: 'easy' },
      { word: 'gos', difficulty: 'easy' },
      { word: 's√≥fi', difficulty: 'easy' },
      { word: 'r√∫m', difficulty: 'easy' },
      { word: 'sj√≥nvarp', difficulty: 'easy' },
      { word: 't√∂lva', difficulty: 'easy' },
      { word: 'kerti', difficulty: 'easy' },
      { word: 'grasker', difficulty: 'easy' },
      { word: 'draugur', difficulty: 'easy' },
      { word: 'gr√≠ma', difficulty: 'easy' },
      
      // Mi√∞lungs
      { word: 'fj√∂lskylda', difficulty: 'medium' },
      { word: 'krydd', difficulty: 'medium' },
      { word: 'lambal√¶ri', difficulty: 'medium' },
      { word: 'herbergi', difficulty: 'medium' },
      { word: 'snakk', difficulty: 'medium' },
      { word: 'beinagrind', difficulty: 'medium' },
      { word: 'sp√°kona', difficulty: 'medium' }
    ];

    const PictionaryGame = () => {
      const [usedWords, setUsedWords] = useState([]);
      const [currentWord, setCurrentWord] = useState(null);
      const [timeLeft, setTimeLeft] = useState(60);
      const [isRunning, setIsRunning] = useState(false);
      const [gameFinished, setGameFinished] = useState(false);
      const audioContextRef = useRef(null);

      // B√∫a til AudioContext einu sinni
      useEffect(() => {
        audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();
        return () => {
          if (audioContextRef.current) {
            audioContextRef.current.close();
          }
        };
      }, []);

      // Spila stutt p√≠p
      const playBeep = () => {
        if (!audioContextRef.current) return;
        
        const ctx = audioContextRef.current;
        const oscillator = ctx.createOscillator();
        const gainNode = ctx.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(ctx.destination);
        
        oscillator.frequency.value = 800; // H√¶√∞ t√≥ns
        oscillator.type = 'sine'; // Mj√∫kt hlj√≥√∞
        
        gainNode.gain.setValueAtTime(0.15, ctx.currentTime); // L√°gur styrkur (15%)
        gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.1);
        
        oscillator.start(ctx.currentTime);
        oscillator.stop(ctx.currentTime + 0.1); // 100ms p√≠p
      };

      // Spila buzzer √æegar t√≠minn er b√∫inn
      const playBuzzer = () => {
        if (!audioContextRef.current) return;
        
        const ctx = audioContextRef.current;
        const oscillator = ctx.createOscillator();
        const gainNode = ctx.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(ctx.destination);
        
        oscillator.frequency.value = 200; // L√¶gri t√≥nn fyrir "bzzzz"
        oscillator.type = 'sawtooth'; // Gr√≥fara hlj√≥√∞
        
        gainNode.gain.setValueAtTime(0.2, ctx.currentTime); // 20% styrkur
        gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.5);
        
        oscillator.start(ctx.currentTime);
        oscillator.stop(ctx.currentTime + 0.5); // 500ms buzzer
      };

      useEffect(() => {
        let interval;
        if (isRunning && timeLeft > 0) {
          interval = setInterval(() => {
            setTimeLeft(prev => {
              const newTime = prev - 1;
              
              // P√≠p √° s√≠√∞ustu 10 sek√∫ndum
              if (newTime <= 10 && newTime > 0) {
                playBeep();
              }
              
              // Buzzer √æegar t√≠minn er b√∫inn
              if (newTime === 0) {
                playBuzzer();
              }
              
              return newTime;
            });
          }, 1000);
        } else if (timeLeft === 0) {
          setIsRunning(false);
        }
        return () => clearInterval(interval);
      }, [isRunning, timeLeft]);

      const getRandomWord = () => {
        const availableWords = WORDS.filter(w => !usedWords.includes(w.word));
        
        if (availableWords.length === 0) {
          setGameFinished(true);
          return null;
        }
        
        const randomIndex = Math.floor(Math.random() * availableWords.length);
        return availableWords[randomIndex];
      };

      const startNewWord = () => {
        const word = getRandomWord();
        if (word) {
          setCurrentWord(word);
          setTimeLeft(60);
          setIsRunning(true);
        }
      };

      const stopTimer = () => {
        setIsRunning(false);
        setCurrentWord(null);
        setTimeLeft(60);
      };

      const nextWord = () => {
        if (currentWord) {
          setUsedWords(prev => [...prev, currentWord.word]);
        }
        const word = getRandomWord();
        if (word) {
          setCurrentWord(word);
          setTimeLeft(60);
          setIsRunning(true);
        }
      };

      const resetGame = () => {
        setUsedWords([]);
        setCurrentWord(null);
        setTimeLeft(60);
        setIsRunning(false);
        setGameFinished(false);
      };

      const getDifficultyColor = (difficulty) => {
        switch(difficulty) {
          case 'easy': return 'bg-green-100 text-green-800 border-green-300';
          case 'medium': return 'bg-yellow-100 text-yellow-800 border-yellow-300';
          case 'hard': return 'bg-red-100 text-red-800 border-red-300';
          default: return 'bg-gray-100 text-gray-800 border-gray-300';
        }
      };

      const getDifficultyText = (difficulty) => {
        switch(difficulty) {
          case 'easy': return 'Au√∞velt';
          case 'medium': return 'Mi√∞lungs';
          case 'hard': return 'Erfitt';
          default: return '';
        }
      };

      const formatTime = (seconds) => {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins}:${secs.toString().padStart(2, '0')}`;
      };

      return (
        <div className="min-h-screen pb-12">
          {/* Header */}
          <header className="bg-white shadow-sm border-b border-gray-200">
            <div className="max-w-4xl mx-auto px-6 py-8">
              <button 
                onClick={() => window.history.back()} 
                className="text-sm text-gray-500 hover:text-gray-700 mb-2 inline-block font-light"
              >
                ‚Üê Til baka
              </button>
              <h1 className="text-3xl font-light text-gray-800 mb-2">üé® Teiknileikur</h1>
              <p className="text-gray-500 text-sm font-light">Pictionary √° √≠slensku ¬∑ A1-A2</p>
            </div>
          </header>

          {/* Main Content */}
          <main className="max-w-4xl mx-auto px-6 mt-8">
            
            {/* Lei√∞beiningar */}
            <div className="bg-blue-50 border-2 border-blue-200 rounded-lg p-6 mb-6">
              <h2 className="text-xl font-normal text-gray-800 mb-3">üìù Lei√∞beiningar</h2>
              <ul className="space-y-2 text-gray-700 font-light">
                <li>‚Ä¢ Smelltu √° "Birta or√∞" til a√∞ byrja</li>
                <li>‚Ä¢ Einn nemandi teiknar or√∞i√∞</li>
                <li>‚Ä¢ A√∞rir giska √° hva√∞ er veri√∞ a√∞ teikna</li>
                <li>‚Ä¢ √û√∫ hefur 60 sek√∫ndur</li>
                <li>‚Ä¢ Smelltu √° "N√¶sta or√∞" √æegar giska√∞ er r√©tt</li>
              </ul>
            </div>

            {/* Leiksv√¶√∞i */}
            <div className="bg-white rounded-lg shadow-xl p-8">
              
              {/* Progress */}
              <div className="mb-6 text-center">
                <p className="text-gray-600 font-light">
                  Or√∞ notu√∞: <span className="font-normal">{usedWords.length}</span> / <span className="font-normal">{WORDS.length}</span>
                </p>
              </div>

              {/* Leikur loki√∞ */}
              {gameFinished && (
                <div className="text-center py-12">
                  <div className="text-6xl mb-4">üéâ</div>
                  <h2 className="text-2xl font-light text-gray-800 mb-4">Leikur loki√∞!</h2>
                  <p className="text-gray-600 font-light mb-6">
                    √ûi√∞ kl√°ru√∞u√∞ √∂ll {WORDS.length} or√∞in!
                  </p>
                  <button
                    onClick={resetGame}
                    className="bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-normal hover:bg-blue-700 transition-colors"
                  >
                    üîÑ Byrja aftur
                  </button>
                </div>
              )}

              {/* Ekkert or√∞ vali√∞ */}
              {!gameFinished && !currentWord && (
                <div className="text-center py-12">
                  <div className="text-6xl mb-6">üé®</div>
                  <button
                    onClick={startNewWord}
                    className="bg-green-600 text-white px-8 py-4 rounded-lg text-xl font-normal hover:bg-green-700 transition-colors shadow-lg"
                  >
                    üìù Birta or√∞
                  </button>
                </div>
              )}

              {/* Or√∞ er vali√∞ */}
              {!gameFinished && currentWord && (
                <div className="text-center">
                  
                  {/* Erfi√∞leikastig */}
                  <div className="mb-4">
                    <span className={`inline-block px-4 py-2 rounded-full text-sm font-normal border-2 ${getDifficultyColor(currentWord.difficulty)}`}>
                      {getDifficultyText(currentWord.difficulty)}
                    </span>
                  </div>

                  {/* Or√∞i√∞ */}
                  <div className="bg-gradient-to-br from-purple-100 to-blue-100 border-4 border-purple-300 rounded-2xl p-12 mb-8">
                    <p className="text-6xl font-bold text-gray-800">
                      {currentWord.word}
                    </p>
                  </div>

                  {/* T√≠mi */}
                  <div className="mb-8">
                    <div className={`inline-block text-5xl font-bold ${timeLeft <= 10 ? 'text-red-600 animate-pulse' : 'text-gray-800'}`}>
                      {formatTime(timeLeft)}
                    </div>
                  </div>

                  {/* Takkar */}
                  <div className="flex flex-col sm:flex-row gap-4 justify-center">
                    <button
                      onClick={stopTimer}
                      className="bg-red-600 text-white px-6 py-3 rounded-lg text-lg font-normal hover:bg-red-700 transition-colors"
                    >
                      ‚èπÔ∏è Stoppa
                    </button>
                    <button
                      onClick={nextWord}
                      className="bg-green-600 text-white px-6 py-3 rounded-lg text-lg font-normal hover:bg-green-700 transition-colors"
                    >
                      ‚û°Ô∏è N√¶sta or√∞
                    </button>
                  </div>
                </div>
              )}

            </div>

            {/* Stigatafla */}
            {usedWords.length > 0 && !gameFinished && (
              <div className="mt-6 bg-white rounded-lg shadow-sm p-6">
                <h3 className="text-lg font-normal text-gray-800 mb-3">‚úÖ Or√∞ sem hafa veri√∞ notu√∞:</h3>
                <div className="flex flex-wrap gap-2">
                  {usedWords.map((word, index) => (
                    <span 
                      key={index}
                      className="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm font-light"
                    >
                      {word}
                    </span>
                  ))}
                </div>
              </div>
            )}

          </main>
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<PictionaryGame />);
  </script>
</body>
</html>
