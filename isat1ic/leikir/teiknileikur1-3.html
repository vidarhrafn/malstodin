<!DOCTYPE html>
<html lang="is">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üé® Teiknileikur ‚Äì √Åhugam√°l og l√≠kamsr√¶kt</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      background: linear-gradient(to bottom, #f8f7f4 0%, #e8e6e1 100%);
      min-height: 100vh;
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const WORDS = [
      // √Åhugam√°l
      { word: 'g√≠tar', difficulty: 'easy', topic: '√Åhugam√°l' },
      { word: 'fi√∞la', difficulty: 'easy', topic: '√Åhugam√°l' },
      { word: 'sundlaug', difficulty: 'easy', topic: '√Åhugam√°l' },
      { word: 'markv√∂r√∞ur', difficulty: 'easy', topic: '√Åhugam√°l' },
      { word: 'heitur pottur', difficulty: 'easy', topic: '√Åhugam√°l' },
      { word: 'hlj√≥msveit', difficulty: 'medium', topic: '√Åhugam√°l' },
      { word: 't√≥nleik–∞—Ä', difficulty: 'medium', topic: '√Åhugam√°l' },
      { word: 'b√≥k', difficulty: 'easy', topic: '√Åhugam√°l' },
      { word: 'f√≥tbolti', difficulty: 'easy', topic: '√Åhugam√°l' },

      // L√≠kamsr√¶kt
      { word: 'hlaupabretti', difficulty: 'easy', topic: 'L√≠kamsr√¶kt' },
      { word: 'l√≥√∞', difficulty: 'easy', topic: 'L√≠kamsr√¶kt' },
      { word: 'j√≥ga', difficulty: 'easy', topic: 'L√≠kamsr√¶kt' },
      { word: 'hj√≥l', difficulty: 'easy', topic: 'L√≠kamsr√¶kt' },
      { word: 'handkl√¶√∞i', difficulty: 'easy', topic: 'L√≠kamsr√¶kt' },
      { word: 'hlaupask√≥r', difficulty: 'easy', topic: 'L√≠kamsr√¶kt' },
      { word: 'gufuba√∞', difficulty: 'medium', topic: 'L√≠kamsr√¶kt' },
      { word: 'a√∞ lyfta l√≥√∞um', difficulty: 'medium', topic: 'L√≠kamsr√¶kt' },
      { word: 'a√∞ dansa', difficulty: 'easy', topic: 'L√≠kamsr√¶kt' },
      { word: 'a√∞ hlaupa', difficulty: 'easy', topic: 'L√≠kamsr√¶kt' },
      { word: 'fjallganga', difficulty: 'medium', topic: 'L√≠kamsr√¶kt' },

      // Bj√∂rgunarsveitir
      { word: '√æyrla', difficulty: 'easy', topic: 'Bj√∂rgunarsveitir' },
      { word: 'jeppi', difficulty: 'easy', topic: 'Bj√∂rgunarsveitir' },
      { word: 'v√©lsle√∞i', difficulty: 'easy', topic: 'Bj√∂rgunarsveitir' },
      { word: 'hj√°lmur', difficulty: 'easy', topic: 'Bj√∂rgunarsveitir' },
      { word: 'h√∂fu√∞lj√≥s', difficulty: 'easy', topic: 'Bj√∂rgunarsveitir' },
      { word: 'talst√∂√∞', difficulty: 'medium', topic: 'Bj√∂rgunarsveitir' },
      { word: 'a√∞ klifra', difficulty: 'medium', topic: 'Bj√∂rgunarsveitir' },
      { word: 'skyndihj√°lp', difficulty: 'medium', topic: 'Bj√∂rgunarsveitir' },
    ];

    const TOPIC_COLORS = {
      '√Åhugam√°l': 'bg-blue-50 text-blue-700 border-blue-200',
      'L√≠kamsr√¶kt': 'bg-green-50 text-green-700 border-green-200',
      'Bj√∂rgunarsveitir': 'bg-purple-50 text-purple-700 border-purple-200',
    };

    const PictionaryGame = () => {
      const [usedWords, setUsedWords] = useState([]);
      const [currentWord, setCurrentWord] = useState(null);
      const [timeLeft, setTimeLeft] = useState(60);
      const [isRunning, setIsRunning] = useState(false);
      const [gameFinished, setGameFinished] = useState(false);
      const audioContextRef = useRef(null);

      useEffect(() => {
        audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();
        return () => {
          if (audioContextRef.current) audioContextRef.current.close();
        };
      }, []);

      const playBeep = () => {
        if (!audioContextRef.current) return;
        const ctx = audioContextRef.current;
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain); gain.connect(ctx.destination);
        osc.frequency.value = 800; osc.type = 'sine';
        gain.gain.setValueAtTime(0.15, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.1);
        osc.start(ctx.currentTime); osc.stop(ctx.currentTime + 0.1);
      };

      const playBuzzer = () => {
        if (!audioContextRef.current) return;
        const ctx = audioContextRef.current;
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain); gain.connect(ctx.destination);
        osc.frequency.value = 200; osc.type = 'sawtooth';
        gain.gain.setValueAtTime(0.2, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.5);
        osc.start(ctx.currentTime); osc.stop(ctx.currentTime + 0.5);
      };

      useEffect(() => {
        let interval;
        if (isRunning && timeLeft > 0) {
          interval = setInterval(() => {
            setTimeLeft(prev => {
              const t = prev - 1;
              if (t <= 10 && t > 0) playBeep();
              if (t === 0) playBuzzer();
              return t;
            });
          }, 1000);
        } else if (timeLeft === 0) {
          setIsRunning(false);
        }
        return () => clearInterval(interval);
      }, [isRunning, timeLeft]);

      const getRandomWord = () => {
        const available = WORDS.filter(w => !usedWords.includes(w.word));
        if (available.length === 0) { setGameFinished(true); return null; }
        return available[Math.floor(Math.random() * available.length)];
      };

      const startNewWord = () => {
        const word = getRandomWord();
        if (word) { setCurrentWord(word); setTimeLeft(60); setIsRunning(true); }
      };

      const stopTimer = () => { setIsRunning(false); setCurrentWord(null); setTimeLeft(60); };

      const nextWord = () => {
        if (currentWord) setUsedWords(prev => [...prev, currentWord.word]);
        const word = getRandomWord();
        if (word) { setCurrentWord(word); setTimeLeft(60); setIsRunning(true); }
      };

      const resetGame = () => {
        setUsedWords([]); setCurrentWord(null); setTimeLeft(60);
        setIsRunning(false); setGameFinished(false);
      };

      const getDifficultyColor = (d) => ({
        easy: 'bg-green-100 text-green-800 border-green-300',
        medium: 'bg-yellow-100 text-yellow-800 border-yellow-300',
        hard: 'bg-red-100 text-red-800 border-red-300',
      }[d] || 'bg-gray-100 text-gray-800 border-gray-300');

      const getDifficultyText = (d) => ({ easy: 'Au√∞velt', medium: 'Mi√∞lungs', hard: 'Erfitt' }[d] || '');
      const formatTime = (s) => `${Math.floor(s/60)}:${(s%60).toString().padStart(2,'0')}`;

      // Group used words by topic
      const usedByTopic = usedWords.reduce((acc, word) => {
        const w = WORDS.find(x => x.word === word);
        if (w) { acc[w.topic] = acc[w.topic] || []; acc[w.topic].push(word); }
        return acc;
      }, {});

      return (
        <div className="min-h-screen pb-12">
          <header className="bg-white shadow-sm border-b border-gray-200">
            <div className="max-w-4xl mx-auto px-6 py-8">
              <button onClick={() => window.history.back()}
                className="text-sm text-gray-500 hover:text-gray-700 mb-2 inline-block font-light">
                ‚Üê Til baka
              </button>
              <h1 className="text-3xl font-light text-gray-800 mb-2">üé® Teiknileikur ‚Äì √Åhugam√°l</h1>
              <p className="text-gray-500 text-sm font-light">Pictionary √° √≠slensku ¬∑ √Åhugam√°l, L√≠kamsr√¶kt og Bj√∂rgunarsveitir ¬∑ A1‚ÄìB1</p>
            </div>
          </header>

          <main className="max-w-4xl mx-auto px-6 mt-8">

            {/* Lei√∞beiningar */}
            <div className="bg-blue-50 border-2 border-blue-200 rounded-lg p-6 mb-6">
              <h2 className="text-xl font-normal text-gray-800 mb-3">üìù Lei√∞beiningar</h2>
              <ul className="space-y-2 text-gray-700 font-light">
                <li>‚Ä¢ Smelltu √° ‚ÄûBirta or√∞" til a√∞ byrja</li>
                <li>‚Ä¢ Einn nemandi teiknar or√∞i√∞ √° t√∂fluna</li>
                <li>‚Ä¢ A√∞rir giska √° hva√∞ er veri√∞ a√∞ teikna</li>
                <li>‚Ä¢ √û√∫ hefur 60 sek√∫ndur</li>
                <li>‚Ä¢ Smelltu √° ‚ÄûN√¶sta or√∞" √æegar giska√∞ er r√©tt</li>
              </ul>
              {/* Litak√≥√∞ar */}
              <div className="mt-4 flex flex-wrap gap-2">
                {Object.entries(TOPIC_COLORS).map(([topic, cls]) => (
                  <span key={topic} className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-light border ${cls}`}>
                    {topic}
                  </span>
                ))}
              </div>
            </div>

            {/* Leiksv√¶√∞i */}
            <div className="bg-white rounded-lg shadow-xl p-8">

              <div className="mb-6 text-center">
                <p className="text-gray-600 font-light">
                  Or√∞ notu√∞: <span className="font-normal">{usedWords.length}</span> / <span className="font-normal">{WORDS.length}</span>
                </p>
              </div>

              {/* Leikur loki√∞ */}
              {gameFinished && (
                <div className="text-center py-12">
                  <div className="text-6xl mb-4">üéâ</div>
                  <h2 className="text-2xl font-light text-gray-800 mb-4">Leikur loki√∞!</h2>
                  <p className="text-gray-600 font-light mb-6">√ûi√∞ kl√°ru√∞u√∞ √∂ll {WORDS.length} or√∞in!</p>
                  <button onClick={resetGame}
                    className="bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-normal hover:bg-blue-700 transition-colors">
                    üîÑ Byrja aftur
                  </button>
                </div>
              )}

              {/* Ekkert or√∞ vali√∞ */}
              {!gameFinished && !currentWord && (
                <div className="text-center py-12">
                  <div className="text-6xl mb-6">üé®</div>
                  <button onClick={startNewWord}
                    className="bg-green-600 text-white px-8 py-4 rounded-lg text-xl font-normal hover:bg-green-700 transition-colors shadow-lg">
                    üìù Birta or√∞
                  </button>
                </div>
              )}

              {/* Or√∞ vali√∞ */}
              {!gameFinished && currentWord && (
                <div className="text-center">

                  {/* Erfi√∞leiki + Efnisflokkur */}
                  <div className="mb-4 flex justify-center gap-2">
                    <span className={`inline-block px-4 py-1 rounded-full text-sm font-normal border-2 ${getDifficultyColor(currentWord.difficulty)}`}>
                      {getDifficultyText(currentWord.difficulty)}
                    </span>
                    <span className={`inline-block px-4 py-1 rounded-full text-sm font-normal border ${TOPIC_COLORS[currentWord.topic]}`}>
                      {currentWord.topic}
                    </span>
                  </div>

                  {/* Or√∞i√∞ */}
                  <div className="bg-gradient-to-br from-purple-100 to-blue-100 border-4 border-purple-300 rounded-2xl p-12 mb-8">
                    <p className="text-6xl font-bold text-gray-800">{currentWord.word}</p>
                  </div>

                  {/* T√≠mam√¶lir */}
                  <div className="mb-8">
                    <div className={`inline-block text-5xl font-bold ${timeLeft <= 10 ? 'text-red-600 animate-pulse' : 'text-gray-800'}`}>
                      {formatTime(timeLeft)}
                    </div>
                  </div>

                  {/* Takkar */}
                  <div className="flex flex-col sm:flex-row gap-4 justify-center">
                    <button onClick={stopTimer}
                      className="bg-red-600 text-white px-6 py-3 rounded-lg text-lg font-normal hover:bg-red-700 transition-colors">
                      ‚èπÔ∏è Stoppa
                    </button>
                    <button onClick={nextWord}
                      className="bg-green-600 text-white px-6 py-3 rounded-lg text-lg font-normal hover:bg-green-700 transition-colors">
                      ‚û°Ô∏è N√¶sta or√∞
                    </button>
                  </div>
                </div>
              )}
            </div>

            {/* Notu√∞ or√∞ eftir flokki */}
            {usedWords.length > 0 && !gameFinished && (
              <div className="mt-6 bg-white rounded-lg shadow-sm p-6">
                <h3 className="text-lg font-normal text-gray-800 mb-4">‚úÖ Or√∞ sem hafa veri√∞ notu√∞:</h3>
                {Object.entries(usedByTopic).map(([topic, words]) => (
                  <div key={topic} className="mb-3">
                    <p className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-light border mb-2 ${TOPIC_COLORS[topic]}`}>{topic}</p>
                    <div className="flex flex-wrap gap-2">
                      {words.map((word, i) => (
                        <span key={i} className="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm font-light">{word}</span>
                      ))}
                    </div>
                  </div>
                ))}
              </div>
            )}

          </main>
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<PictionaryGame />);
  </script>
</body>
</html>
