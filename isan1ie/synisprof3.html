<!DOCTYPE html>
<html lang="is">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>√Üfingapr√≥f ‚Äì L√Ωsingaror√∞</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif; background:linear-gradient(to bottom,#f8f7f4 0%,#e8e6e1 100%); min-height:100vh; }
    .drop-zone { display:inline-flex;align-items:center;justify-content:center;min-width:110px;height:34px;border:2px dashed #d1d5db;border-radius:8px;background:#f9fafb;vertical-align:middle;margin:0 2px;padding:0 8px;transition:border-color .15s,background .15s,transform .15s; }
    .drop-zone.has-word { border-style:solid;border-color:#3b82f6;background:#eff6ff;cursor:grab; }
    .drop-zone.drag-over { border-color:#2563eb;background:#dbeafe;transform:scale(1.04); }
    .drop-zone.correct { border-style:solid;border-color:#22c55e;background:#f0fdf4;color:#15803d;font-weight:500;pointer-events:none; }
    .drop-zone.wrong { border-color:#ef4444;background:#fef2f2;animation:shake .4s ease; }
    @keyframes shake{0%,100%{transform:translateX(0)}20%{transform:translateX(-5px)}40%{transform:translateX(5px)}60%{transform:translateX(-4px)}80%{transform:translateX(3px)}}
    .drop-zone .word-label{font-size:.88rem;pointer-events:none;white-space:nowrap;}
    .word-chip{display:inline-flex;align-items:center;gap:4px;font-size:.88rem;background:#eff6ff;border:1.5px solid #93c5fd;color:#1e3a5f;padding:5px 12px;border-radius:999px;cursor:grab;user-select:none;touch-action:none;transition:transform .15s,box-shadow .15s,opacity .2s;}
    .word-chip:hover{box-shadow:0 2px 8px rgba(59,130,246,.25);transform:translateY(-1px);}
    .word-chip.dragging{opacity:.4;}
    .word-chip .gt{font-size:.68rem;color:#3b82f6;font-style:italic;}
    .wb-drop{transition:border-color .15s,background .15s;}
    .wb-drop.dob{border-color:#93c5fd !important;background:#eff6ff !important;}
    .drag-ghost{position:fixed;pointer-events:none;z-index:9999;font-size:.88rem;background:#eff6ff;border:1.5px solid #93c5fd;padding:5px 12px;border-radius:999px;opacity:.9;transform:translate(-50%,-50%);white-space:nowrap;display:none;}
    .ans-input{border:2px solid #e5e7eb;border-radius:8px;padding:6px 12px;font-size:.9rem;width:100%;outline:none;transition:border-color .15s;background:white;}
    .ans-input:focus{border-color:#3b82f6;}
    .ans-input.correct-inp{border-color:#22c55e !important;background:#f0fdf4;color:#15803d;}
    .ans-input.wrong-inp{border-color:#ef4444 !important;background:#fef2f2;}
    .sec-badge{display:inline-block;background:#eff6ff;color:#2563eb;font-size:.75rem;font-weight:600;padding:2px 10px;border-radius:20px;border:1px solid #bfdbfe;margin-bottom:8px;}
    .fb-ok{background:#f0fdf4;border:2px solid #86efac;border-radius:10px;padding:12px 16px;color:#15803d;}
    .fb-bad{background:#fef9c3;border:2px solid #fde047;border-radius:10px;padding:12px 16px;color:#854d0e;}
    .tbl-input{border:2px solid #e5e7eb;border-radius:6px;padding:4px 8px;font-size:.85rem;width:100%;outline:none;transition:border-color .15s;background:white;text-align:center;}
    .tbl-input:focus{border-color:#3b82f6;}
    .tbl-input.correct-inp{border-color:#22c55e !important;background:#f0fdf4;color:#15803d;}
    .tbl-input.wrong-inp{border-color:#ef4444 !important;background:#fef2f2;}
    .match-sel{border:2px solid #e5e7eb;border-radius:8px;padding:6px 10px;font-size:.88rem;outline:none;transition:border-color .15s;background:white;width:80px;}
    .match-sel:focus{border-color:#3b82f6;}
    .match-sel.correct-inp{border-color:#22c55e !important;background:#f0fdf4;color:#15803d;}
    .match-sel.wrong-inp{border-color:#ef4444 !important;background:#fef2f2;}
    /* Page transitions */
    .page{display:none;}
    .page.active{display:block;}
    /* Tab nav */
    .tab-btn{transition:all .2s;position:relative;white-space:nowrap;}
    .tab-btn.done{color:#16a34a;}
    .tab-btn.current{background:white;border-bottom:3px solid #3b82f6;color:#2563eb;}
  </style>
</head>
<body class="pb-20">

<header class="bg-white shadow-sm border-b border-gray-200">
  <div class="max-w-3xl mx-auto px-6 py-5">
    <button onclick="window.history.back()" class="text-sm text-gray-500 hover:text-gray-700 mb-2 inline-block font-light">‚Üê Til baka</button>
    <h1 class="text-3xl font-light text-gray-800 mb-1">√Üfingapr√≥f ‚Äì L√Ωsingaror√∞</h1>
    <p class="text-gray-500 text-sm font-light">Gagnvirkt pr√≥f ¬∑ Heildareinkunn birtist √æegar allt er kl√°ra√∞</p>
  </div>
</header>

<!-- Tab navigation -->
<div class="sticky top-0 z-40 bg-white border-b border-gray-200 shadow-sm">
  <div class="max-w-3xl mx-auto px-4">
    <div class="flex overflow-x-auto" id="tabNav">
      <!-- tabs injected by JS -->
    </div>
  </div>
</div>

<main class="max-w-3xl mx-auto px-6 mt-6">

<!-- ‚ïê‚ïê PAGE 1: STIGBREYTING ‚ïê‚ïê -->
<div class="page" id="page1">
  <div class="bg-white rounded-xl shadow-md p-8">
    <div class="sec-badge">1. Stigbreyting ¬∑ 8%</div>
    <h2 class="text-xl font-light text-gray-800 mb-2">Stigbreyttu l√Ωsingaror√∞unum</h2>
    <p class="text-sm text-gray-500 font-light mb-6">D√¶mi: <em>latur ‚Üí latari ‚Üí latastur</em></p>
    <div class="space-y-6">
      <div class="border-2 border-gray-100 rounded-lg p-5">
        <p class="text-base font-normal text-gray-800 mb-4">Grunnstig: <strong class="text-blue-600">heitur</strong></p>
        <div class="grid grid-cols-2 gap-4">
          <div><label class="text-xs text-gray-500 font-light mb-1 block">Mi√∞stig</label><input class="ans-input" id="s1_1a" placeholder="..."/></div>
          <div><label class="text-xs text-gray-500 font-light mb-1 block">Efsta stig</label><input class="ans-input" id="s1_1b" placeholder="..."/></div>
        </div>
      </div>
      <div class="border-2 border-gray-100 rounded-lg p-5">
        <p class="text-base font-normal text-gray-800 mb-4">Grunnstig: <strong class="text-blue-600">st√≥r</strong></p>
        <div class="grid grid-cols-2 gap-4">
          <div><label class="text-xs text-gray-500 font-light mb-1 block">Mi√∞stig</label><input class="ans-input" id="s1_2a" placeholder="..."/></div>
          <div><label class="text-xs text-gray-500 font-light mb-1 block">Efsta stig</label><input class="ans-input" id="s1_2b" placeholder="..."/></div>
        </div>
      </div>
    </div>
    <div id="sec1-fb" class="mt-5 hidden"></div>
    <div class="flex gap-3 mt-5 flex-wrap">
      <button onclick="checkSec1()" id="btn1" class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 font-normal transition-colors">Athuga sv√∂r</button>
      <button onclick="goPage(2)" id="next1" class="hidden bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 font-normal transition-colors">√Åfram ‚Üí</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê PAGE 2: DRAG AND DROP ‚ïê‚ïê -->
<div class="page" id="page2">
  <div class="bg-white rounded-xl shadow-md p-8">
    <div class="sec-badge">2. Fylla √≠ ey√∞ur ¬∑ 10%</div>
    <h2 class="text-xl font-light text-gray-800 mb-6">Settu r√©tt l√Ωsingaror√∞ inn √≠ fr√°s√∂gnina</h2>
    <div class="text-gray-700 font-light leading-10 text-base mb-6" id="dndText">
      √âg er <span class="drop-zone" data-answer="√°n√¶g√∞ur"></span> af √æv√≠ a√∞ √©g f√©kk loksins fr√≠ √≠ dag.
      Br√≥√∞ir minn var <span class="drop-zone" data-answer="rei√∞ur"></span> √æegar hann missti s√≠mann sinn.
      √ç g√¶r keypti √©g <span class="drop-zone" data-answer="ferskt"></span> brau√∞ √≠ bakar√≠i.
      √âg er <span class="drop-zone" data-answer="lei√∞ur"></span> yfir √æv√≠ a√∞ √æ√∫ getir ekki komi√∞ √≠ heims√≥kn.
      Hundurinn minn er mj√∂g <span class="drop-zone" data-answer="fj√∂rugur"></span> og elskar a√∞ hlaupa.
      √ûegar √©g er me√∞ hausverk er √©g oft <span class="drop-zone" data-answer="√æreyttur"></span>.
      Kaffi√∞ er <span class="drop-zone" data-answer="heitt"></span> og √©g √æarf a√∞ b√≠√∞a a√∞eins.
      Vegurinn heim er <span class="drop-zone" data-answer="beinn"></span> og √©g labba hratt.
    </div>
    <p class="text-sm font-light text-gray-500 mb-2 uppercase tracking-wide">Or√∞alisti ‚Äì drag√∞u or√∞in upp √≠ textann</p>
    <div id="wordBank2" class="wb-drop flex flex-wrap gap-2 min-h-[52px] rounded-lg border-2 border-dashed border-gray-200 p-4 mb-5"></div>
    <div id="sec2-fb" class="hidden mb-4"></div>
    <div class="flex gap-3 flex-wrap">
      <button id="btn2" onclick="checkSec2()" disabled class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-normal transition-colors">Athuga sv√∂r</button>
      <button id="btn2r" onclick="resetSec2()" class="hidden bg-gray-500 text-white px-8 py-3 rounded-lg hover:bg-gray-600 font-normal transition-colors">Endurstilla</button>
      <button onclick="goPage(3)" id="next2" class="hidden bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 font-normal transition-colors">√Åfram ‚Üí</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê PAGE 3: TENGJA SAMAN ‚ïê‚ïê -->
<div class="page" id="page3">
  <div class="bg-white rounded-xl shadow-md p-8">
    <div class="sec-badge">3. Tengja saman ¬∑ 8%</div>
    <h2 class="text-xl font-light text-gray-800 mb-6">Tengdu saman or√∞ og r√©tta merkingu</h2>
    <div class="space-y-4">
      <div class="flex items-center gap-4">
        <div class="flex-1 bg-blue-50 border-2 border-blue-100 rounded-lg px-4 py-3 font-normal text-gray-800">1. Vinalegur</div>
        <select class="match-sel" id="m1" onchange="updateBtn3()"><option value="">‚Äî</option><option value="c">c</option><option value="d">d</option><option value="a">a</option><option value="b">b</option></select>
        <div class="text-xs text-gray-400 w-40 font-light hidden md:block" id="mlbl1"></div>
      </div>
      <div class="flex items-center gap-4">
        <div class="flex-1 bg-blue-50 border-2 border-blue-100 rounded-lg px-4 py-3 font-normal text-gray-800">2. Skipulag√∞ur</div>
        <select class="match-sel" id="m2" onchange="updateBtn3()"><option value="">‚Äî</option><option value="c">c</option><option value="d">d</option><option value="a">a</option><option value="b">b</option></select>
        <div class="text-xs text-gray-400 w-40 font-light hidden md:block" id="mlbl2"></div>
      </div>
      <div class="flex items-center gap-4">
        <div class="flex-1 bg-blue-50 border-2 border-blue-100 rounded-lg px-4 py-3 font-normal text-gray-800">3. Kurteis</div>
        <select class="match-sel" id="m3" onchange="updateBtn3()"><option value="">‚Äî</option><option value="c">c</option><option value="d">d</option><option value="a">a</option><option value="b">b</option></select>
        <div class="text-xs text-gray-400 w-40 font-light hidden md:block" id="mlbl3"></div>
      </div>
      <div class="flex items-center gap-4">
        <div class="flex-1 bg-blue-50 border-2 border-blue-100 rounded-lg px-4 py-3 font-normal text-gray-800">4. √Åbyrgur</div>
        <select class="match-sel" id="m4" onchange="updateBtn3()"><option value="">‚Äî</option><option value="c">c</option><option value="d">d</option><option value="a">a</option><option value="b">b</option></select>
        <div class="text-xs text-gray-400 w-40 font-light hidden md:block" id="mlbl4"></div>
      </div>
    </div>
    <div class="mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200 text-sm font-light text-gray-600 space-y-1">
      <p><strong>a.</strong> Fylgir reglum og gerir √æa√∞ sem √° a√∞ gera</p>
      <p><strong>b.</strong> S√Ωnir vir√∞ingu og segir ‚Äûtakk" og ‚Äûgj√∂r√∞u svo vel"</p>
      <p><strong>c.</strong> Brosir, talar fallega og hj√°lpar √∂√∞rum</p>
      <p><strong>d.</strong> Hefur allt √° s√≠num sta√∞ og veit hva√∞ √° a√∞ gera</p>
    </div>
    <div id="sec3-fb" class="mt-4 hidden"></div>
    <div class="flex gap-3 mt-5 flex-wrap">
      <button id="btn3" onclick="checkSec3()" disabled class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-normal transition-colors">Athuga sv√∂r</button>
      <button id="btn3r" onclick="resetSec3()" class="hidden bg-gray-500 text-white px-8 py-3 rounded-lg hover:bg-gray-600 font-normal transition-colors">Endurstilla</button>
      <button onclick="goPage(4)" id="next3" class="hidden bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 font-normal transition-colors">√Åfram ‚Üí</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê PAGE 4: KYN ‚ïê‚ïê -->
<div class="page" id="page4">
  <div class="bg-white rounded-xl shadow-md p-8">
    <div class="sec-badge">4. Kyn l√Ωsingaror√∞a ¬∑ 20%</div>
    <h2 class="text-xl font-light text-gray-800 mb-6">Skrifa√∞u r√©tt form √≠ karlkyni, kvenkyni og hvorugkyni</h2>
    <div class="overflow-x-auto">
      <table class="w-full text-sm border-collapse">
        <thead>
          <tr class="border-b-2 border-gray-200">
            <th class="text-left py-3 px-3 font-normal text-gray-600">Karlkyn (Hann er‚Ä¶)</th>
            <th class="text-left py-3 px-3 font-normal text-gray-600">Kvenkyn (H√∫n er‚Ä¶)</th>
            <th class="text-left py-3 px-3 font-normal text-gray-600">Hvorugkyn (√ûa√∞ er‚Ä¶)</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-gray-100 bg-blue-50">
            <td class="py-3 px-3 font-semibold text-blue-700">sterkur</td>
            <td class="py-3 px-3 font-semibold text-blue-700">sterk</td>
            <td class="py-3 px-3 font-semibold text-blue-700">sterkt</td>
          </tr>
          <tr class="border-b border-gray-100">
            <td class="py-2 px-3 font-normal text-gray-700">kaldur</td>
            <td class="py-2 px-3"><input class="tbl-input" data-correct="k√∂ld" placeholder="..."/></td>
            <td class="py-2 px-3"><input class="tbl-input" data-correct="kalt" placeholder="..."/></td>
          </tr>
          <tr class="border-b border-gray-100">
            <td class="py-2 px-3 font-normal text-gray-700">√æungur</td>
            <td class="py-2 px-3"><input class="tbl-input" data-correct="√æung" placeholder="..."/></td>
            <td class="py-2 px-3"><input class="tbl-input" data-correct="√æungt" placeholder="..."/></td>
          </tr>
          <tr class="border-b border-gray-100">
            <td class="py-2 px-3"><input class="tbl-input" data-correct="r√≥legur" placeholder="..."/></td>
            <td class="py-2 px-3"><input class="tbl-input" data-correct="r√≥leg" placeholder="..."/></td>
            <td class="py-2 px-3 font-normal text-gray-700">r√≥legt</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div id="sec4-fb" class="mt-4 hidden"></div>
    <div class="flex gap-3 mt-5 flex-wrap">
      <button onclick="checkSec4()" id="btn4" class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 font-normal transition-colors">Athuga sv√∂r</button>
      <button id="btn4r" onclick="resetSec4()" class="hidden bg-gray-500 text-white px-8 py-3 rounded-lg hover:bg-gray-600 font-normal transition-colors">Endurstilla</button>
      <button onclick="goPage(5)" id="next4" class="hidden bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 font-normal transition-colors">√Åfram ‚Üí</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê PAGE 5: ANDHEITI ‚ïê‚ïê -->
<div class="page" id="page5">
  <div class="bg-white rounded-xl shadow-md p-8">
    <div class="sec-badge">5. Andheiti ¬∑ 5%</div>
    <h2 class="text-xl font-light text-gray-800 mb-6">Skrifa√∞u andheiti</h2>
    <div class="space-y-4">
      <div class="flex items-center gap-4">
        <span class="w-28 font-normal text-gray-800">1. Heitur</span>
        <input class="ans-input flex-1" id="and1" placeholder="Andheiti..."/>
      </div>
      <div class="flex items-center gap-4">
        <span class="w-28 font-normal text-gray-800">2. L√©ttur</span>
        <input class="ans-input flex-1" id="and2" placeholder="Andheiti..."/>
      </div>
    </div>
    <div id="sec5-fb" class="mt-5 hidden"></div>
    <div class="flex gap-3 mt-5 flex-wrap">
      <button onclick="checkSec5()" id="btn5" class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 font-normal transition-colors">Athuga sv√∂r</button>
      <button id="btn5r" onclick="resetSec5()" class="hidden bg-gray-500 text-white px-8 py-3 rounded-lg hover:bg-gray-600 font-normal transition-colors">Endurstilla</button>
      <button onclick="goPage(6)" id="next5" class="hidden bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 font-normal transition-colors">√Åfram ‚Üí</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê PAGE 6: SKILNINGUR ‚ïê‚ïê -->
<div class="page" id="page6">
  <div class="bg-white rounded-xl shadow-md p-8">
    <div class="sec-badge">6. Skilningur ¬∑ 21%</div>
    <h2 class="text-xl font-light text-gray-800 mb-4">Lesi√∞ s√∂guna og svari√∞ spurningunum</h2>
    <div class="bg-amber-50 border-2 border-amber-100 rounded-xl p-6 mb-6 text-gray-700 font-light leading-relaxed text-sm">
      Einu sinni var kona fr√° Selfossi. H√∫n √°tti heima √° Akranesi og vann √≠ litlum matv√∂ruverslun. √Å √æri√∞judagsmorgni vakna√∞i h√∫n snemma og s√° a√∞ √æa√∞ var sk√Ωja√∞ √∫ti en samt hl√Ωtt. H√∫n vann venjulega fr√° n√≠u til fimm, en √æennan √æri√∞judag f√≥r h√∫n klukkan fj√∂gur √∫r vinnunni. H√∫n √¶tla√∞i a√∞ heims√¶kja vinkonu s√≠na √≠ Borgarnesi og koma me√∞ sm√° gj√∂f.<br/><br/>
      H√∫n keyr√∞i af sta√∞ eftir vinnu og stoppa√∞i √≠ b√∫√∞ til a√∞ kaupa bl√≥m. S√≠√∞an f√≥r h√∫n √°fram og kom til vinkonunnar. √û√¶r drukku te, spj√∂llu√∞u lengi og hl√≥gu miki√∞. Um kv√∂ldi√∞ f√≥r konan heim, bj√≥ s√©r einfaldan kv√∂ldmat og f√≥r snemma a√∞ sofa.
    </div>
    <div class="space-y-4">
      <div><p class="text-sm font-normal text-gray-700 mb-1">1. Hvar √°tti konan heima?</p><input class="ans-input" id="q6_1" placeholder="Svar..."/></div>
      <div><p class="text-sm font-normal text-gray-700 mb-1">2. Hva√∞an var konan?</p><input class="ans-input" id="q6_2" placeholder="Svar..."/></div>
      <div><p class="text-sm font-normal text-gray-700 mb-1">3. Hva√∞a dag gerist sagan?</p><input class="ans-input" id="q6_3" placeholder="Svar..."/></div>
      <div><p class="text-sm font-normal text-gray-700 mb-1">4. Hvert √¶tla√∞i konan a√∞ fara eftir vinnu?</p><input class="ans-input" id="q6_4" placeholder="Svar..."/></div>
      <div><p class="text-sm font-normal text-gray-700 mb-1">5. Hven√¶r f√≥r h√∫n √∫r vinnunni √æennan dag?</p><input class="ans-input" id="q6_5" placeholder="Svar..."/></div>
      <div><p class="text-sm font-normal text-gray-700 mb-1">6. Hva√∞ keypti h√∫n √≠ b√∫√∞inni?</p><input class="ans-input" id="q6_6" placeholder="Svar..."/></div>
      <div><p class="text-sm font-normal text-gray-700 mb-1">7. Hva√∞ ger√∞u √æ√¶r vinkonurnar saman?</p><input class="ans-input" id="q6_7" placeholder="Svar..."/></div>
    </div>
    <div id="sec6-fb" class="mt-5 hidden"></div>
    <div class="flex gap-3 mt-5 flex-wrap">
      <button onclick="checkSec6()" id="btn6" class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 font-normal transition-colors">Athuga sv√∂r</button>
      <button id="btn6r" onclick="resetSec6()" class="hidden bg-gray-500 text-white px-8 py-3 rounded-lg hover:bg-gray-600 font-normal transition-colors">Endurstilla</button>
      <button onclick="goPage(7)" id="next6" class="hidden bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 font-normal transition-colors">√Åfram ‚Üí</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê PAGE 7: FINNA L√ùSINGAROR√ê ‚ïê‚ïê -->
<div class="page" id="page7">
  <div class="bg-white rounded-xl shadow-md p-8">
    <div class="sec-badge">7. Finna l√Ωsingaror√∞ ¬∑ 18%</div>
    <h2 class="text-xl font-light text-gray-800 mb-4">Skrifa√∞u l√Ωsingaror√∞in upp og seg√∞u kyni√∞</h2>
    <div class="bg-amber-50 border-2 border-amber-100 rounded-xl p-6 mb-5 text-gray-700 font-light leading-relaxed text-sm">
      Er √æetta n√Ωr b√≠ll? J√° en h√∫si√∞ er gamalt. B√≥kin er skemmtileg.
    </div>
    <p class="text-sm text-gray-500 font-light mb-4">√û√∫ m√°tt nota kk. / kvk. / hk. e√∞a karlkyn / kvenkyn / hvorugkyn</p>
    <div class="grid grid-cols-1 gap-3" id="sec7rows"></div>
    <div id="sec7-fb" class="mt-5 hidden"></div>
    <div class="flex gap-3 mt-5 flex-wrap">
      <button onclick="checkSec7()" id="btn7" class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 font-normal transition-colors">Athuga sv√∂r</button>
      <button id="btn7r" onclick="resetSec7()" class="hidden bg-gray-500 text-white px-8 py-3 rounded-lg hover:bg-gray-600 font-normal transition-colors">Endurstilla</button>
      <button onclick="goPage(8)" id="next7" class="hidden bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 font-normal transition-colors">√Åfram ‚Üí</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê PAGE 8: SKRIFA UM MYND ‚ïê‚ïê -->
<div class="page" id="page8">
  <div class="bg-white rounded-xl shadow-md p-8">
    <div class="sec-badge">8. Skrifa um mynd ¬∑ 10%</div>
    <h2 class="text-xl font-light text-gray-800 mb-2">Skrifa√∞u 2 setningar um myndina</h2>
    <p class="text-sm text-gray-500 font-light mb-5">Nota√∞u <strong>a√∞ minnsta kosti 2 l√Ωsingaror√∞</strong>. Hver setning √æarf a√∞ vera a√∞ minnsta kosti 4 or√∞.</p>
    <img src="media/eldhus.png" alt="Herbergi" class="w-full rounded-xl mb-6 border-2 border-gray-100 object-cover max-h-80" onerror="this.style.display='none';document.getElementById('imgPlaceholder').style.display='flex'"/>
    <div id="imgPlaceholder" class="hidden w-full h-48 rounded-xl mb-6 border-2 border-dashed border-gray-200 bg-gray-50 items-center justify-center text-gray-400 font-light text-sm flex">üì∑ media/herbergi.jpg</div>
    <div class="space-y-3">
      <div><label class="text-xs text-gray-400 font-light">Setning 1</label><input class="ans-input mt-1" id="s8_1" placeholder="Skrifa√∞u setningu..."/></div>
      <div><label class="text-xs text-gray-400 font-light">Setning 2</label><input class="ans-input mt-1" id="s8_2" placeholder="Skrifa√∞u setningu..."/></div>
    </div>
    <div id="sec8-fb" class="mt-5 hidden"></div>
    <div class="flex gap-3 mt-5 flex-wrap">
      <button onclick="checkSec8()" id="btn8" class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 font-normal transition-colors">Athuga sv√∂r</button>
      <button id="btn8r" onclick="resetSec8()" class="hidden bg-gray-500 text-white px-8 py-3 rounded-lg hover:bg-gray-600 font-normal transition-colors">Endurstilla</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê NI√êURSTA√êA ‚ïê‚ïê -->
<div class="page" id="page9">
  <div class="bg-white rounded-xl shadow-md p-8 text-center">
    <p class="text-3xl font-light text-gray-800 mb-2">üéâ Pr√≥fi loki√∞!</p>
    <div id="finalScore" class="text-5xl font-light text-blue-600 my-4"></div>
    <div id="finalBreakdown" class="text-sm font-light text-gray-600 mt-4 space-y-1 text-left max-w-xs mx-auto"></div>
    <button onclick="goPage(1)" class="mt-6 bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 font-normal transition-colors">‚Üê Byrja aftur</button>
  </div>
</div>

</main>
<div class="drag-ghost" id="dragGhost"></div>

<script>
// ‚îÄ‚îÄ PAGE SYSTEM ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const TOTAL=8;
const secDone=Array(TOTAL+1).fill(false);
const secScores=Array(TOTAL+1).fill(null);
const secMax=[0,8,10,8,20,5,21,18,10];
const LABELS=['1. Stigbreyting','2. Ey√∞ur','3. Tengja','4. Kyn','5. Andheiti','6. Skilningur','7. L√Ωsingaror√∞','8. Mynd'];
let currentPage=1;

function buildTabs(){
  const nav=document.getElementById('tabNav');nav.innerHTML='';
  for(let i=1;i<=TOTAL;i++){
    const btn=document.createElement('button');
    btn.className='tab-btn px-3 py-3 text-xs font-normal text-gray-500 border-b-2 border-transparent flex-shrink-0 '+(i===currentPage?'current':'')+(secDone[i]?' done':'');
    btn.textContent=(secDone[i]?'‚úì ':'')+LABELS[i-1];
    btn.onclick=()=>goPage(i);
    nav.appendChild(btn);
  }
}

function goPage(n){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  const pg=document.getElementById('page'+n);
  if(pg){pg.classList.add('active');currentPage=n;window.scrollTo({top:0,behavior:'smooth'});}
  else if(n>TOTAL)showFinal();
  buildTabs();
}

function markDone(sec,score){
  secDone[sec]=true;secScores[sec]=score;
  const btn=document.getElementById('btn'+sec);
  if(btn){btn.disabled=true;btn.textContent='Loki√∞ ‚úì';btn.classList.remove('bg-blue-600','hover:bg-blue-700');btn.classList.add('bg-green-600');}
  const nx=document.getElementById('next'+sec);if(nx)nx.classList.remove('hidden');
  const rb=document.getElementById('btn'+sec+'r');if(rb)rb.classList.remove('hidden');
  buildTabs();
  if(secDone.slice(1).every(Boolean))setTimeout(()=>goPage(9),800);
}

function showFinal(){
  goPage(9);
  let total=0,bd='';
  for(let i=1;i<=TOTAL;i++){total+=secScores[i]||0;bd+=`<p>Verkefni ${i}: ${secScores[i]||0}/${secMax[i]} stig</p>`;}
  document.getElementById('finalScore').textContent=`${total}/100 stig`;
  document.getElementById('finalBreakdown').innerHTML=bd;
}

// ‚îÄ‚îÄ UTILITIES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function norm(s){return s.trim().toLowerCase().replace(/[.,!?]/g,'');}
async function callAI(messages,max_tokens=400){
  const r=await fetch('/.netlify/functions/openai',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({messages,max_tokens,model:'gpt-4o',temperature:0.2})});
  const d=await r.json();if(!r.ok||d.error)throw new Error(d.error);return d.content;
}
function setLoading(id,on){const b=document.getElementById(id);if(on){b.disabled=true;b.textContent='Athuga...';}else{b.disabled=false;b.textContent='Athuga sv√∂r';}}
function showFb(id,html){const el=document.getElementById(id);el.innerHTML=html;el.classList.remove('hidden');el.scrollIntoView({behavior:'smooth',block:'nearest'});}

// ‚îÄ‚îÄ SEC 1: STIGBREYTING ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function checkSec1(){
  const fields=[{id:'s1_1a',w:'heitur',slot:'mi√∞stig'},{id:'s1_1b',w:'heitur',slot:'efsta stig'},{id:'s1_2a',w:'st√≥r',slot:'mi√∞stig'},{id:'s1_2b',w:'st√≥r',slot:'efsta stig'}];
  const answers=fields.map(f=>({slot:`${f.w} ‚Äì ${f.slot}`,answer:document.getElementById(f.id).value.trim()}));
  if(answers.some(a=>!a.answer)){showFb('sec1-fb','<p class="text-yellow-700 text-sm font-light">Vinsamlega fylltu √≠ allar ey√∞ur.</p>');return;}
  setLoading('btn1',true);
  try{
    const sys=`√û√∫ ert √≠slenskukennari. Nemandi er a√∞ stigbreyta l√Ωsingaror√∞um.
R√©tt: heitur ‚Üí heitari ‚Üí heitastur. st√≥r ‚Üí st√¶rri ‚Üí st√¶rstur.
Gef√∞u 1 stig fyrir hvert r√©tt (h√°mark 4), skala√∞u √≠ 8 (x2).
SKILA√êU EINUNGIS JSON: {"score_8":N,"feedback":"stutt endurgj√∂f √° √≠slensku ‚Äì s√Ωndu r√©tt svar ef rangt"}`;
    const res=await callAI([{role:'system',content:sys},{role:'user',content:JSON.stringify(answers)}]);
    const obj=JSON.parse(res);const score=Math.min(8,Math.max(0,obj.score_8||0));
    showFb('sec1-fb',`<div class="${score>=6?'fb-ok':'fb-bad'}"><p class="font-normal mb-1">Einkunn: ${score}/8 stig</p><p class="text-sm font-light">${obj.feedback}</p></div>`);
    markDone(1,score);
  }catch(e){showFb('sec1-fb','<p class="text-red-600 text-sm">Villa. Reyndu aftur.</p>');setLoading('btn1',false);}
}

// ‚îÄ‚îÄ SEC 2: DRAG AND DROP ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const WORDS2=[
  {word:'√°n√¶g√∞ur',gender:'kk'},{word:'rei√∞ur',gender:'kk'},{word:'ferskt',gender:'hk'},
  {word:'lei√∞ur',gender:'kk'},{word:'fj√∂rugur',gender:'kk'},{word:'√æreyttur',gender:'kk'},
  {word:'heitt',gender:'hk'},{word:'beinn',gender:'kk'}
];
function shuf(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
const bankEntries2=shuf(WORDS2.map((w,i)=>({...w,id:w.word+'_'+i})));
let drag2=null;
const ghost=document.getElementById('dragGhost');
const wb2=document.getElementById('wordBank2');

function buildBank2(entries){wb2.innerHTML='';entries.forEach(e=>wb2.appendChild(makeChip2(e)));}
function makeChip2(e){
  const c=document.createElement('span');c.className='word-chip';c.dataset.word=e.word;c.dataset.chipId=e.id;
  c.innerHTML=`${e.word} <span class="gt">${e.gender}</span>`;c.draggable=true;
  c.addEventListener('dragstart',ev=>{drag2={word:c.dataset.word,chipId:c.dataset.chipId,sourceZone:null};c.classList.add('dragging');ev.dataTransfer.effectAllowed='move';});
  c.addEventListener('dragend',()=>c.classList.remove('dragging'));
  c.addEventListener('touchstart',onTS2,{passive:false});c.addEventListener('touchmove',onTM2,{passive:false});c.addEventListener('touchend',onTE2);
  return c;
}

document.querySelectorAll('#dndText .drop-zone').forEach(dz=>{
  dz.addEventListener('dragover',e=>{e.preventDefault();dz.classList.add('drag-over');});
  dz.addEventListener('dragleave',()=>dz.classList.remove('drag-over'));
  dz.addEventListener('drop',e=>{e.preventDefault();dz.classList.remove('drag-over');if(!drag2)return;place2(dz,drag2.word,drag2.chipId,drag2.sourceZone);drag2=null;});
  dz.addEventListener('dragstart',e=>{if(!dz.dataset.current)return;drag2={word:dz.dataset.current,chipId:dz.dataset.chipId,sourceZone:dz};e.dataTransfer.effectAllowed='move';});
  dz.addEventListener('touchstart',e=>{if(!dz.dataset.current)return;onTS2(e,dz);},{passive:false});
  dz.addEventListener('touchmove',onTM2,{passive:false});
  dz.addEventListener('touchend',e=>onTE2(e,dz));
});
wb2.addEventListener('dragover',e=>{e.preventDefault();wb2.classList.add('dob');});
wb2.addEventListener('dragleave',()=>wb2.classList.remove('dob'));
wb2.addEventListener('drop',e=>{e.preventDefault();wb2.classList.remove('dob');if(!drag2?.sourceZone)return;returnBank2(drag2.sourceZone);drag2=null;});

function place2(zone,word,chipId,srcZone){
  if(zone.dataset.current)returnBank2(zone);
  if(!srcZone){const c=wb2.querySelector(`[data-chip-id="${chipId}"]`);if(c)c.remove();}
  else clearZone2(srcZone);
  zone.dataset.current=word;zone.dataset.chipId=chipId;
  zone.classList.add('has-word');zone.classList.remove('wrong','correct');
  zone.setAttribute('draggable','true');
  zone.innerHTML=`<span class="word-label">${word}</span>`;upd2();
}
function returnBank2(zone){
  const word=zone.dataset.current,chipId=zone.dataset.chipId;if(!word)return;
  const gender=WORDS2.find(w=>w.word===word)?.gender||'';
  wb2.appendChild(makeChip2({word,gender,id:chipId}));clearZone2(zone);upd2();
}
function clearZone2(z){z.dataset.current='';z.dataset.chipId='';z.classList.remove('has-word','wrong','correct');z.setAttribute('draggable','false');z.innerHTML='';}
function upd2(){
  const zones=[...document.querySelectorAll('#dndText .drop-zone')];
  document.getElementById('btn2').disabled=!zones.every(z=>z.dataset.current||z.classList.contains('correct'));
}
function checkSec2(){
  const zones=[...document.querySelectorAll('#dndText .drop-zone')];
  let correct=0,wrong=0;
  zones.forEach(z=>{
    if(z.classList.contains('correct')){correct++;return;}
    if(z.dataset.current===z.dataset.answer){z.classList.remove('has-word','wrong');z.classList.add('correct');z.setAttribute('draggable','false');z.innerHTML=`<span class="word-label">${z.dataset.current}</span><span class="ml-1 text-green-500 text-sm">‚úì</span>`;correct++;}
    else{z.classList.add('wrong');wrong++;setTimeout(()=>returnBank2(z),700);}
  });
  const score=Math.round(correct/zones.length*10);
  showFb('sec2-fb',`<div class="${correct===zones.length?'fb-ok':'fb-bad'}"><p class="font-normal">${correct}/${zones.length} r√©tt ‚Äì ${score}/10 stig</p>${wrong>0?'<p class="text-sm font-light mt-1">R√∂ng or√∞ f√≥ru til baka. Pr√≥fa√∞u aftur!</p>':''}</div>`);
  if(correct===zones.length)markDone(2,score);
  else upd2();
}
function resetSec2(){document.querySelectorAll('#dndText .drop-zone').forEach(clearZone2);buildBank2(shuf([...bankEntries2]));document.getElementById('sec2-fb').classList.add('hidden');document.getElementById('btn2r').classList.add('hidden');document.getElementById('next2').classList.add('hidden');secDone[2]=false;secScores[2]=null;const btn=document.getElementById('btn2');btn.textContent='Athuga sv√∂r';btn.classList.remove('bg-green-600');btn.classList.add('bg-blue-600','hover:bg-blue-700');buildTabs();upd2();}

let tc2={word:null,chipId:null,sourceZone:null};
function onTS2(e,zo){const el=zo||e.currentTarget;const isZ=el.classList.contains('drop-zone');const word=isZ?el.dataset.current:el.dataset.word;if(!word)return;e.preventDefault();tc2={word,chipId:el.dataset.chipId,sourceZone:isZ?el:null};ghost.textContent=word;ghost.style.display='block';const t=e.touches[0];ghost.style.left=t.clientX+'px';ghost.style.top=t.clientY+'px';}
function onTM2(e){if(!tc2.word)return;e.preventDefault();const t=e.touches[0];ghost.style.left=t.clientX+'px';ghost.style.top=t.clientY+'px';document.querySelectorAll('#dndText .drop-zone').forEach(d=>d.classList.remove('drag-over'));document.elementFromPoint(t.clientX,t.clientY)?.closest('#dndText .drop-zone:not(.correct)')?.classList.add('drag-over');}
function onTE2(e){if(!tc2.word)return;ghost.style.display='none';document.querySelectorAll('#dndText .drop-zone').forEach(d=>d.classList.remove('drag-over'));wb2.classList.remove('dob');const t=e.changedTouches[0];const el=document.elementFromPoint(t.clientX,t.clientY);const tz=el?.closest('#dndText .drop-zone:not(.correct)');const tb=el?.closest('#wordBank2');if(tz)place2(tz,tc2.word,tc2.chipId,tc2.sourceZone);else if(tb&&tc2.sourceZone)returnBank2(tc2.sourceZone);tc2={word:null,chipId:null,sourceZone:null};}

// ‚îÄ‚îÄ SEC 3: MATCHING ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const matchCorrect={m1:'c',m2:'d',m3:'b',m4:'a'};
const matchLabels={c:'c. Brosir, talar fallega',d:'d. Hefur allt √° s√≠num sta√∞',b:'b. S√Ωnir vir√∞ingu',a:'a. Fylgir reglum'};
function updateBtn3(){document.getElementById('btn3').disabled=!['m1','m2','m3','m4'].every(id=>document.getElementById(id).value);}
function checkSec3(){
  let correct=0;
  ['m1','m2','m3','m4'].forEach((id,i)=>{
    const sel=document.getElementById(id);const lbl=document.getElementById('mlbl'+(i+1));
    if(sel.value===matchCorrect[id]){sel.classList.add('correct-inp');correct++;if(lbl)lbl.textContent='‚úì '+matchLabels[sel.value];}
    else{sel.classList.add('wrong-inp');if(lbl){lbl.textContent='‚úó R√©tt: '+matchLabels[matchCorrect[id]];lbl.classList.add('text-red-500');}}
    sel.disabled=true;
  });
  const score=Math.round(correct/4*8);
  showFb('sec3-fb',`<div class="${correct===4?'fb-ok':'fb-bad'}"><p class="font-normal">${correct}/4 r√©tt ‚Äì ${score}/8 stig</p></div>`);
  markDone(3,score);
}
function resetSec3(){['m1','m2','m3','m4'].forEach((id,i)=>{const sel=document.getElementById(id);sel.value='';sel.className='match-sel';sel.disabled=false;const lbl=document.getElementById('mlbl'+(i+1));if(lbl){lbl.textContent='';lbl.className='text-xs text-gray-400 w-40 font-light hidden md:block';}});document.getElementById('sec3-fb').classList.add('hidden');document.getElementById('btn3r').classList.add('hidden');document.getElementById('next3').classList.add('hidden');document.getElementById('btn3').disabled=true;secDone[3]=false;secScores[3]=null;const btn=document.getElementById('btn3');btn.textContent='Athuga sv√∂r';btn.classList.add('bg-blue-600','hover:bg-blue-700');btn.classList.remove('bg-green-600');buildTabs();}

// ‚îÄ‚îÄ SEC 4: KYN ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function checkSec4(){
  const inputs=document.querySelectorAll('#page4 .tbl-input');let correct=0;
  inputs.forEach(inp=>{if(norm(inp.value)===norm(inp.dataset.correct)){inp.classList.add('correct-inp');inp.disabled=true;correct++;}else inp.classList.add('wrong-inp');});
  const total=inputs.length;const score=Math.round(correct/total*20);
  showFb('sec4-fb',`<div class="${correct===total?'fb-ok':'fb-bad'}"><p class="font-normal">${correct}/${total} r√©tt ‚Äì ${score}/20 stig</p>${correct<total?'<p class="text-sm font-light mt-1">Rau√∞u reitirnir eru rangir.</p>':''}</div>`);
  if(correct===total)markDone(4,score);
  else document.querySelectorAll('#page4 .tbl-input.wrong-inp').forEach(i=>i.classList.remove('wrong-inp'));
}
function resetSec4(){document.querySelectorAll('#page4 .tbl-input').forEach(i=>{i.value='';i.className='tbl-input';i.disabled=false;});document.getElementById('sec4-fb').classList.add('hidden');document.getElementById('btn4r').classList.add('hidden');document.getElementById('next4').classList.add('hidden');secDone[4]=false;secScores[4]=null;const btn=document.getElementById('btn4');btn.textContent='Athuga sv√∂r';btn.disabled=false;btn.classList.add('bg-blue-600','hover:bg-blue-700');btn.classList.remove('bg-green-600');buildTabs();}

// ‚îÄ‚îÄ SEC 5: ANDHEITI ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function checkSec5(){
  const pairs=[{word:'Heitur',ans:document.getElementById('and1').value.trim()},{word:'L√©ttur',ans:document.getElementById('and2').value.trim()}];
  if(pairs.some(p=>!p.ans)){showFb('sec5-fb','<p class="text-yellow-700 text-sm font-light">Fylltu √≠ b√¶√∞i sv√∂rin.</p>');return;}
  setLoading('btn5',true);
  try{
    const sys=`√û√∫ ert √≠slenskukennari. Nemandi √° a√∞ skrifa andheiti vi√∞ tv√∂ √≠slensk l√Ωsingaror√∞ √≠ kk. nf.
Or√∞ 1: Heitur ‚Äì r√©tt andheiti: kaldur (e√∞a √∂nnur l√∂gm√¶t √≠slensk andheiti)
Or√∞ 2: L√©ttur ‚Äì r√©tt andheiti: √æungur (e√∞a √∂nnur l√∂gm√¶t √≠slensk andheiti)
Gef√∞u 1 stig fyrir hvert r√©tt. Ef rangt, s√Ωndu r√©tt svar.
SKILA√êU EINUNGIS JSON: {"score":N,"feedback_1":"endurgj√∂f um or√∞ 1","feedback_2":"endurgj√∂f um or√∞ 2"}`;
    const res=await callAI([{role:'system',content:sys},{role:'user',content:JSON.stringify(pairs)}]);
    const obj=JSON.parse(res);const score=Math.min(2,Math.max(0,obj.score||0));
    const pts=score===2?5:score===1?2:0;
    showFb('sec5-fb',`<div class="${score===2?'fb-ok':'fb-bad'}"><p class="font-normal mb-2">Einkunn: ${pts}/5 stig</p><p class="text-sm font-light mb-1"><strong>1. Heitur:</strong> ${obj.feedback_1}</p><p class="text-sm font-light"><strong>2. L√©ttur:</strong> ${obj.feedback_2}</p></div>`);
    markDone(5,pts);
  }catch(e){showFb('sec5-fb','<p class="text-red-600 text-sm">Villa. Reyndu aftur.</p>');setLoading('btn5',false);}
}
function resetSec5(){['and1','and2'].forEach(id=>{const el=document.getElementById(id);el.value='';el.className='ans-input flex-1';});document.getElementById('sec5-fb').classList.add('hidden');document.getElementById('btn5r').classList.add('hidden');document.getElementById('next5').classList.add('hidden');secDone[5]=false;secScores[5]=null;const btn=document.getElementById('btn5');btn.textContent='Athuga sv√∂r';btn.disabled=false;btn.classList.add('bg-blue-600','hover:bg-blue-700');btn.classList.remove('bg-green-600');buildTabs();}

// ‚îÄ‚îÄ SEC 6: SKILNINGUR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function checkSec6(){
  const qs=['Hvar √°tti konan heima?','Hva√∞an var konan?','Hva√∞a dag gerist sagan?','Hvert √¶tla√∞i konan a√∞ fara eftir vinnu?','Hven√¶r f√≥r h√∫n √∫r vinnunni √æennan dag?','Hva√∞ keypti h√∫n √≠ b√∫√∞inni?','Hva√∞ ger√∞u √æ√¶r vinkonurnar saman?'];
  const answers=qs.map((q,i)=>({question:q,answer:document.getElementById('q6_'+(i+1)).value.trim()}));
  if(answers.some(a=>!a.answer)){showFb('sec6-fb','<p class="text-yellow-700 text-sm font-light">Svara√∞u √∂llum spurningum.</p>');return;}
  setLoading('btn6',true);
  try{
    const sys=`√û√∫ ert √≠slenskukennari. Metur sv√∂r vi√∞ skilningsspurningum.
TEXTI: Konan fr√° Selfossi. √Å heima √° Akranesi. Vinnur √≠ matv√∂ruverslun. √ûri√∞judagur. F√≥r kl. fj√∂gur √∫r vinnu. F√≥r til vinkonunnar √≠ Borgarnesi. Keypti bl√≥m. √û√¶r drukku te, spj√∂llu√∞u og hl√≥gu.
Gef√∞u 1 stig fyrir hvert r√©tt svar (h√°mark 7). Hunsa sm√°v√¶gilegar m√°lfr√¶√∞ivillur.
SKILA√êU EINUNGIS JSON: {"score":N,"feedback":"stutt endurgj√∂f √° √≠slensku"}`;
    const res=await callAI([{role:'system',content:sys},{role:'user',content:JSON.stringify(answers)}],500);
    const obj=JSON.parse(res);const score=Math.min(7,Math.max(0,obj.score||0));const pts=Math.round(score/7*21);
    showFb('sec6-fb',`<div class="${score>=6?'fb-ok':'fb-bad'}"><p class="font-normal mb-1">Einkunn: ${pts}/21 stig (${score}/7 r√©tt)</p><p class="text-sm font-light">${obj.feedback}</p></div>`);
    markDone(6,pts);
  }catch(e){showFb('sec6-fb','<p class="text-red-600 text-sm">Villa. Reyndu aftur.</p>');setLoading('btn6',false);}
}
function resetSec6(){for(let i=1;i<=7;i++){const el=document.getElementById('q6_'+i);el.value='';el.className='ans-input';}document.getElementById('sec6-fb').classList.add('hidden');document.getElementById('btn6r').classList.add('hidden');document.getElementById('next6').classList.add('hidden');secDone[6]=false;secScores[6]=null;const btn=document.getElementById('btn6');btn.textContent='Athuga sv√∂r';btn.disabled=false;btn.classList.add('bg-blue-600','hover:bg-blue-700');btn.classList.remove('bg-green-600');buildTabs();}

// ‚îÄ‚îÄ SEC 7: L√ùSINGAROR√ê ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
(function(){
  const rows=document.getElementById('sec7rows');
  for(let i=1;i<=3;i++){
    const div=document.createElement('div');div.className='flex items-center gap-3';
    div.innerHTML=`<span class="text-xs text-gray-400 font-light w-4">${i}.</span><input class="ans-input flex-1" id="s7w${i}" placeholder="L√Ωsingaror√∞..."/><input class="ans-input w-32" id="s7g${i}" placeholder="kyn..."/>`;
    rows.appendChild(div);
  }
})();
const SEC7=[{word:'n√Ωr',genders:['kk','karlkyn']},{word:'gamalt',genders:['hk','hvorugkyn']},{word:'skemmtileg',genders:['kvk','kvenkyn']}];
function normG(s){return s.trim().toLowerCase().replace(/\./g,'');}
function checkSec7(){
  let correct=0;
  for(let i=1;i<=3;i++){
    const wEl=document.getElementById('s7w'+i);const gEl=document.getElementById('s7g'+i);
    const w=norm(wEl.value);const g=normG(gEl.value);const exp=SEC7[i-1];
    const wOk=w===exp.word;const gOk=exp.genders.includes(g);
    if(wOk&&gOk){wEl.classList.add('correct-inp');gEl.classList.add('correct-inp');correct++;}
    else{if(!wOk)wEl.classList.add('wrong-inp');else wEl.classList.add('correct-inp');if(!gOk)gEl.classList.add('wrong-inp');else gEl.classList.add('correct-inp');}
  }
  const score=Math.round(correct/3*18);
  showFb('sec7-fb',`<div class="${correct===3?'fb-ok':'fb-bad'}"><p class="font-normal mb-1">${correct}/3 r√©tt ‚Äì ${score}/18 stig</p>${correct<3?'<p class="text-sm font-light mt-1">R√©tt sv√∂r: <strong>n√Ωr (kk)</strong>, <strong>gamalt (hk)</strong>, <strong>skemmtileg (kvk)</strong></p>':''}</div>`);
  if(correct===3)markDone(7,score);
  else setTimeout(()=>{document.querySelectorAll('#sec7rows .wrong-inp').forEach(el=>{el.classList.remove('wrong-inp','correct-inp');});},1500);
}
function resetSec7(){for(let i=1;i<=3;i++){document.getElementById('s7w'+i).value='';document.getElementById('s7w'+i).className='ans-input flex-1';document.getElementById('s7g'+i).value='';document.getElementById('s7g'+i).className='ans-input w-32';}document.getElementById('sec7-fb').classList.add('hidden');document.getElementById('btn7r').classList.add('hidden');document.getElementById('next7').classList.add('hidden');secDone[7]=false;secScores[7]=null;const btn=document.getElementById('btn7');btn.textContent='Athuga sv√∂r';btn.disabled=false;btn.classList.add('bg-blue-600','hover:bg-blue-700');btn.classList.remove('bg-green-600');buildTabs();}

// ‚îÄ‚îÄ SEC 8: MYND ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function checkSec8(){
  const sents=[document.getElementById('s8_1').value.trim(),document.getElementById('s8_2').value.trim()];
  if(sents.some(s=>!s)){showFb('sec8-fb','<p class="text-yellow-700 text-sm font-light">Skrifa√∞u b√°√∞ar setningar.</p>');return;}
  setLoading('btn8',true);
  try{
    const sys=`√û√∫ ert √≠slenskukennari. Nemandi skrifar 2 setningar um mynd af herbergi.
KR√ñFUR: 2 setningar, a.m.k. 2 l√Ωsingaror√∞, hverri setningu a.m.k. 4 or√∞.
Gef√∞u 0-10. Tilgreindu l√Ωsingaror√∞in sem notu√∞ voru.
SKILA√êU EINUNGIS JSON: {"score":N,"feedback":"hvetjandi endurgj√∂f √° √≠slensku"}`;
    const res=await callAI([{role:'system',content:sys},{role:'user',content:sents.join('\n')}],400);
    const obj=JSON.parse(res);const score=Math.min(10,Math.max(0,obj.score||0));
    showFb('sec8-fb',`<div class="${score>=7?'fb-ok':'fb-bad'}"><p class="font-normal mb-1">Einkunn: ${score}/10 stig</p><p class="text-sm font-light">${obj.feedback}</p></div>`);
    markDone(8,score);
  }catch(e){showFb('sec8-fb','<p class="text-red-600 text-sm">Villa. Reyndu aftur.</p>');setLoading('btn8',false);}
}
function resetSec8(){['s8_1','s8_2'].forEach(id=>{const el=document.getElementById(id);el.value='';el.className='ans-input mt-1';});document.getElementById('sec8-fb').classList.add('hidden');document.getElementById('btn8r').classList.add('hidden');secDone[8]=false;secScores[8]=null;const btn=document.getElementById('btn8');btn.textContent='Athuga sv√∂r';btn.disabled=false;btn.classList.add('bg-blue-600','hover:bg-blue-700');btn.classList.remove('bg-green-600');buildTabs();}

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
buildBank2(bankEntries2);
upd2();
buildTabs();
goPage(1);
</script>
</body>
</html>
