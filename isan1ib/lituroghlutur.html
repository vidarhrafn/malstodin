<!DOCTYPE html>
<html lang="is">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Litir ‚Äì kynbeyg√∞ l√Ωsingaror√∞ ¬∑ M√°lst√∂√∞in</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      background: linear-gradient(to bottom, #f8f7f4 0%, #e8e6e1 100%);
      min-height: 100vh;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .fade-in { animation: fadeIn 0.35s ease both; }
    @keyframes popIn {
      0%   { transform: scale(0.85); opacity: 0; }
      70%  { transform: scale(1.04); }
      100% { transform: scale(1);    opacity: 1; }
    }
    .pop-in { animation: popIn 0.3s ease both; }

    select {
      appearance: none;
      -webkit-appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      padding-right: 36px !important;
    }
  </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useCallback } = React;

// ‚îÄ‚îÄ G√∂gn ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

// kk = karlkyn, kvk = kvenkyn, hk = hvorugkyn
const ALL_ITEMS = [
  // rau√∞ur/rau√∞/rautt
  { litur: "rau√∞ur", forms: ["rau√∞ur","rau√∞","rautt"], hlutur: "b√≠ll",       kyn: "kk" },
  { litur: "rau√∞ur", forms: ["rau√∞ur","rau√∞","rautt"], hlutur: "peysa",      kyn: "kvk" },
  { litur: "rau√∞ur", forms: ["rau√∞ur","rau√∞","rautt"], hlutur: "bor√∞",       kyn: "hk" },
  { litur: "rau√∞ur", forms: ["rau√∞ur","rau√∞","rautt"], hlutur: "bolti",      kyn: "kk" },
  { litur: "rau√∞ur", forms: ["rau√∞ur","rau√∞","rautt"], hlutur: "b√≥k",        kyn: "kvk" },
  // bl√°r/bl√°/bl√°tt
  { litur: "bl√°r",   forms: ["bl√°r","bl√°","bl√°tt"],    hlutur: "s√≠mi",       kyn: "kk" },
  { litur: "bl√°r",   forms: ["bl√°r","bl√°","bl√°tt"],    hlutur: "hur√∞",       kyn: "kvk" },
  { litur: "bl√°r",   forms: ["bl√°r","bl√°","bl√°tt"],    hlutur: "h√∫s",        kyn: "hk" },
  { litur: "bl√°r",   forms: ["bl√°r","bl√°","bl√°tt"],    hlutur: "bl√Ωantur",   kyn: "kk" },
  { litur: "bl√°r",   forms: ["bl√°r","bl√°","bl√°tt"],    hlutur: "glas",       kyn: "hk" },
  // gr√¶nn/gr√¶n/gr√¶nt
  { litur: "gr√¶nn",  forms: ["gr√¶nn","gr√¶n","gr√¶nt"],  hlutur: "lampi",      kyn: "kk" },
  { litur: "gr√¶nn",  forms: ["gr√¶nn","gr√¶n","gr√¶nt"],  hlutur: "taska",      kyn: "kvk" },
  { litur: "gr√¶nn",  forms: ["gr√¶nn","gr√¶n","gr√¶nt"],  hlutur: "hj√≥l",       kyn: "hk" },
  { litur: "gr√¶nn",  forms: ["gr√¶nn","gr√¶n","gr√¶nt"],  hlutur: "hundur",     kyn: "kk" },
  { litur: "gr√¶nn",  forms: ["gr√¶nn","gr√¶n","gr√¶nt"],  hlutur: "bla√∞",       kyn: "hk" },
  // svartur/sv√∂rt/svart
  { litur: "svartur",forms: ["svartur","sv√∂rt","svart"],hlutur: "hattur",    kyn: "kk" },
  { litur: "svartur",forms: ["svartur","sv√∂rt","svart"],hlutur: "skyrta",    kyn: "kvk" },
  { litur: "svartur",forms: ["svartur","sv√∂rt","svart"],hlutur: "r√∫m",       kyn: "hk" },
  { litur: "svartur",forms: ["svartur","sv√∂rt","svart"],hlutur: "bolli",     kyn: "kk" },
  { litur: "svartur",forms: ["svartur","sv√∂rt","svart"],hlutur: "epli",      kyn: "hk" },
  // hv√≠tur/hv√≠t/hv√≠tt
  { litur: "hv√≠tur", forms: ["hv√≠tur","hv√≠t","hv√≠tt"], hlutur: "st√≥ll",      kyn: "kk" },
  { litur: "hv√≠tur", forms: ["hv√≠tur","hv√≠t","hv√≠tt"], hlutur: "taska",      kyn: "kvk" },
  { litur: "hv√≠tur", forms: ["hv√≠tur","hv√≠t","hv√≠tt"], hlutur: "bor√∞",       kyn: "hk" },
  { litur: "hv√≠tur", forms: ["hv√≠tur","hv√≠t","hv√≠tt"], hlutur: "kassi",      kyn: "kk" },
  { litur: "hv√≠tur", forms: ["hv√≠tur","hv√≠t","hv√≠tt"], hlutur: "bla√∞",       kyn: "hk" },
  // bleikur/bleik/bleikt
  { litur: "bleikur",forms: ["bleikur","bleik","bleikt"],hlutur: "kj√≥ll",    kyn: "kk" },
  { litur: "bleikur",forms: ["bleikur","bleik","bleikt"],hlutur: "peysa",    kyn: "kvk" },
  { litur: "bleikur",forms: ["bleikur","bleik","bleikt"],hlutur: "hjarta",   kyn: "hk" },
  { litur: "bleikur",forms: ["bleikur","bleik","bleikt"],hlutur: "bl√≥m",     kyn: "hk" },
  { litur: "bleikur",forms: ["bleikur","bleik","bleikt"],hlutur: "glas",     kyn: "hk" },
  // br√∫nn/br√∫n/br√∫nt
  { litur: "br√∫nn",  forms: ["br√∫nn","br√∫n","br√∫nt"],  hlutur: "st√≥ll",      kyn: "kk" },
  { litur: "br√∫nn",  forms: ["br√∫nn","br√∫n","br√∫nt"],  hlutur: "taska",      kyn: "kvk" },
  { litur: "br√∫nn",  forms: ["br√∫nn","br√∫n","br√∫nt"],  hlutur: "bor√∞",       kyn: "hk" },
  { litur: "br√∫nn",  forms: ["br√∫nn","br√∫n","br√∫nt"],  hlutur: "kassi",      kyn: "kk" },
  { litur: "br√∫nn",  forms: ["br√∫nn","br√∫n","br√∫nt"],  hlutur: "epli",       kyn: "hk" },
  // gr√°r/gr√°/gr√°tt
  { litur: "gr√°r",   forms: ["gr√°r","gr√°","gr√°tt"],    hlutur: "lampi",      kyn: "kk" },
  { litur: "gr√°r",   forms: ["gr√°r","gr√°","gr√°tt"],    hlutur: "b√≥k",        kyn: "kvk" },
  { litur: "gr√°r",   forms: ["gr√°r","gr√°","gr√°tt"],    hlutur: "hur√∞",       kyn: "kvk" },
  { litur: "gr√°r",   forms: ["gr√°r","gr√°","gr√°tt"],    hlutur: "h√∫s",        kyn: "hk" },
  { litur: "gr√°r",   forms: ["gr√°r","gr√°","gr√°tt"],    hlutur: "glas",       kyn: "hk" },
  // fj√≥lubl√°r/fj√≥lubl√°/fj√≥lubl√°tt
  { litur: "fj√≥lubl√°r", forms: ["fj√≥lubl√°r","fj√≥lubl√°","fj√≥lubl√°tt"], hlutur: "bolti",  kyn: "kk" },
  { litur: "fj√≥lubl√°r", forms: ["fj√≥lubl√°r","fj√≥lubl√°","fj√≥lubl√°tt"], hlutur: "peysa",  kyn: "kvk" },
  { litur: "fj√≥lubl√°r", forms: ["fj√≥lubl√°r","fj√≥lubl√°","fj√≥lubl√°tt"], hlutur: "hj√≥l",   kyn: "hk" },
  { litur: "fj√≥lubl√°r", forms: ["fj√≥lubl√°r","fj√≥lubl√°","fj√≥lubl√°tt"], hlutur: "penni",  kyn: "kk" },
  { litur: "fj√≥lubl√°r", forms: ["fj√≥lubl√°r","fj√≥lubl√°","fj√≥lubl√°tt"], hlutur: "epli",   kyn: "hk" },
  // appels√≠nugulur/appels√≠nugul/appels√≠nugult
  { litur: "appels√≠nugulur", forms: ["appels√≠nugulur","appels√≠nugul","appels√≠nugult"], hlutur: "bolti",   kyn: "kk" },
  { litur: "appels√≠nugulur", forms: ["appels√≠nugulur","appels√≠nugul","appels√≠nugult"], hlutur: "hattur",  kyn: "kk" },
  { litur: "appels√≠nugulur", forms: ["appels√≠nugulur","appels√≠nugul","appels√≠nugult"], hlutur: "peysa",   kyn: "kvk" },
  { litur: "appels√≠nugulur", forms: ["appels√≠nugulur","appels√≠nugul","appels√≠nugult"], hlutur: "lampi",   kyn: "kk" },
  { litur: "appels√≠nugulur", forms: ["appels√≠nugulur","appels√≠nugul","appels√≠nugult"], hlutur: "glas",    kyn: "hk" },
];

const KYN_LABEL = { kk: "karlkyn", kvk: "kvenkyn", hk: "hvorugkyn" };
const KYN_INDEX = { kk: 0, kvk: 1, hk: 2 };
const ROUND_SIZE = 10;

function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

// ‚îÄ‚îÄ ProgressBar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

const ProgressBar = ({ current, total }) => (
  <div className="flex items-center gap-2 mb-6">
    {Array.from({ length: total }).map((_, i) => (
      <div key={i} className={`h-1.5 flex-1 rounded-full transition-all duration-500
        ${i < current ? 'bg-green-500' : i === current ? 'bg-blue-400' : 'bg-gray-200'}`} />
    ))}
    <span className="text-xs text-gray-400 font-light whitespace-nowrap">{current}/{total}</span>
  </div>
);

// ‚îÄ‚îÄ Round ni√∞urst√∂√∞ur ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

const RoundResults = ({ results, roundNum, totalRounds, onNext, onRestart }) => {
  const correct = results.filter(r => r.correct).length;
  const isLast = roundNum >= totalRounds;
  return (
    <div className="fade-in text-center">
      <div className="text-5xl mb-3">{correct === results.length ? "üéâ" : correct >= 7 ? "üëç" : "üí™"}</div>
      <h3 className="text-lg font-medium text-gray-800 mb-1">Lota {roundNum} loki√∞</h3>
      <p className="text-gray-500 font-light text-sm mb-5">
        √û√∫ f√©kkst <span className="font-medium text-blue-700">{correct} / {results.length}</span> r√©tt
      </p>

      {/* Yfirlit */}
      <div className="text-left space-y-2 mb-6 max-h-64 overflow-y-auto pr-1">
        {results.map((r, i) => (
          <div key={i} className={`flex items-center justify-between px-4 py-2 rounded-lg text-sm
            ${r.correct ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'}`}>
            <span className="font-light text-gray-700">{r.item.hlutur}</span>
            <span className="flex items-center gap-2">
              {!r.correct && (
                <span className="text-red-500 line-through font-light">{r.chosen}</span>
              )}
              <span className={`font-medium ${r.correct ? 'text-green-700' : 'text-green-600'}`}>
                {r.item.forms[KYN_INDEX[r.item.kyn]]}
              </span>
              <span>{r.correct ? "‚úì" : "‚úó"}</span>
            </span>
          </div>
        ))}
      </div>

      <div className="flex gap-3 justify-center">
        {!isLast && (
          <button onClick={onNext}
            className="px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-light text-sm">
            N√¶sta lota ‚Üí
          </button>
        )}
        <button onClick={onRestart}
          className="px-6 py-2.5 border-2 border-gray-200 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors font-light text-sm">
          {isLast ? "Byrja aftur" : "Byrja upp √° n√Ωtt"}
        </button>
      </div>
    </div>
  );
};

// ‚îÄ‚îÄ A√∞al√¶fingin ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

function App() {
  const [allItems]      = useState(() => shuffle(ALL_ITEMS));
  const [roundIndex,    setRoundIndex]    = useState(0);
  const [itemIndex,     setItemIndex]     = useState(0);
  const [selected,      setSelected]      = useState("");
  const [submitted,     setSubmitted]     = useState(false);
  const [roundResults,  setRoundResults]  = useState([]);
  const [showResults,   setShowResults]   = useState(false);
  const [key,           setKey]           = useState(0); // til a√∞ fade-in

  const totalRounds = Math.ceil(allItems.length / ROUND_SIZE);
  const roundStart  = roundIndex * ROUND_SIZE;
  const roundItems  = allItems.slice(roundStart, roundStart + ROUND_SIZE);
  const current     = roundItems[itemIndex];

  const correctForm = current ? current.forms[KYN_INDEX[current.kyn]] : "";
  const isCorrect   = selected === correctForm;

  const handleSubmit = () => {
    if (!selected || submitted) return;
    setSubmitted(true);
    setRoundResults(prev => [...prev, { item: current, chosen: selected, correct: selected === correctForm }]);
  };

  const handleNext = () => {
    if (itemIndex + 1 >= roundItems.length) {
      setShowResults(true);
    } else {
      setItemIndex(i => i + 1);
      setSelected("");
      setSubmitted(false);
      setKey(k => k + 1);
    }
  };

  const handleNextRound = () => {
    setRoundIndex(r => r + 1);
    setItemIndex(0);
    setSelected("");
    setSubmitted(false);
    setRoundResults([]);
    setShowResults(false);
    setKey(k => k + 1);
  };

  const handleRestart = () => {
    // shuffle aftur ‚Äì endurr√¶sa s√≠√∞u
    window.location.reload();
  };

  return (
    <div className="min-h-screen">
      {/* Header */}
      <header className="bg-white shadow-sm border-b border-gray-200">
        <div className="max-w-2xl mx-auto px-6 py-8">
          <button onClick={() => window.history.back()}
            className="text-sm text-gray-500 hover:text-gray-700 mb-2 inline-block font-light">
            ‚Üê Til baka
          </button>
          <h1 className="text-3xl font-light text-gray-800 mb-1">Litir ‚Äì kynbeyg√∞ l√Ωsingaror√∞</h1>
          <p className="text-gray-500 text-sm font-light">Veldu r√©tt form l√Ωsingaror√∞sins ¬∑ A1‚ÄìA2</p>
        </div>
      </header>

      <main className="max-w-2xl mx-auto px-6 py-8 pb-16">
        <div className="bg-white rounded-xl shadow-sm border border-gray-100 p-6">

          {showResults ? (
            <RoundResults
              results={roundResults}
              roundNum={roundIndex + 1}
              totalRounds={totalRounds}
              onNext={handleNextRound}
              onRestart={handleRestart}
            />
          ) : (
            <>
              {/* Framvinda */}
              <div className="mb-1 flex justify-between items-center">
                <span className="text-xs text-gray-400 font-light">
                  Lota {roundIndex + 1} af {totalRounds}
                </span>
              </div>
              <ProgressBar current={itemIndex} total={roundItems.length} />

              {/* Spurning */}
              <div key={key} className="fade-in">

                {/* Setningin */}
                <div className="bg-blue-50 border border-blue-100 rounded-xl px-6 py-8 mb-6 text-center">
                  <p className="text-2xl font-light text-gray-800 flex items-center justify-center gap-3 flex-wrap">

                    {/* Felligluggi */}
                    <select
                      value={selected}
                      onChange={e => { if (!submitted) setSelected(e.target.value); }}
                      disabled={submitted}
                      className={`px-4 py-2 rounded-lg border-2 text-lg font-light transition-colors cursor-pointer
                        focus:outline-none focus:ring-2 focus:ring-blue-400
                        ${submitted
                          ? isCorrect
                            ? 'border-green-400 bg-green-50 text-green-800'
                            : 'border-red-300 bg-red-50 text-red-700'
                          : selected
                            ? 'border-blue-400 bg-white text-gray-800'
                            : 'border-gray-300 bg-white text-gray-400'
                        }`}
                    >
                      <option value="" disabled>‚Äî velja ‚Äî</option>
                      {current.forms.map(f => (
                        <option key={f} value={f}>{f}</option>
                      ))}
                    </select>

                    <span className="text-gray-800">{current.hlutur}</span>
                  </p>

                  {/* Kynmerki */}
                  <p className="mt-3 text-xs text-gray-400 font-light">
                    {current.hlutur} er {KYN_LABEL[current.kyn]}
                    {!submitted && <span className="ml-1 opacity-50">(sj√°√∞u til baka eftir svar)</span>}
                  </p>
                </div>

                {/* Endurgj√∂f */}
                {submitted && (
                  <div className={`pop-in mb-5 p-4 rounded-lg border text-sm font-light
                    ${isCorrect
                      ? 'bg-green-50 border-green-200 text-green-700'
                      : 'bg-red-50 border-red-200 text-red-700'
                    }`}>
                    {isCorrect
                      ? `‚úì R√©tt! ${current.forms[KYN_INDEX[current.kyn]]} ${current.hlutur} ‚Äì vel gert!`
                      : `‚úó R√©tt svar er: ${correctForm} ${current.hlutur} (${KYN_LABEL[current.kyn]})`
                    }
                  </div>
                )}

                {/* Takkar */}
                <div className="flex justify-between items-center">
                  <span className="text-xs text-gray-400 font-light">
                    {itemIndex + 1} / {roundItems.length}
                  </span>
                  {!submitted ? (
                    <button
                      onClick={handleSubmit}
                      disabled={!selected}
                      className="px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700
                        disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed
                        transition-colors font-light text-sm">
                      Sta√∞festa
                    </button>
                  ) : (
                    <button
                      onClick={handleNext}
                      className="px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700
                        transition-colors font-light text-sm">
                      {itemIndex + 1 >= roundItems.length ? "Sj√° ni√∞urst√∂√∞ur ‚Üí" : "N√¶sta ‚Üí"}
                    </button>
                  )}
                </div>

              </div>
            </>
          )}

        </div>

        {/* Kynlykill */}
        <div className="mt-4 flex gap-3 justify-center">
          {[["kk","karlkyn","blue"],["kvk","kvenkyn","purple"],["hk","hvorugkyn","amber"]].map(([k,l,c]) => (
            <span key={k} className={`text-xs px-3 py-1 rounded-full border font-light
              bg-${c}-50 text-${c}-700 border-${c}-200`}>
              {k} = {l}
            </span>
          ))}
        </div>
      </main>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>
