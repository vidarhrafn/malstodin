<!DOCTYPE html>
<html lang="is">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üéí Pakka√∞u t√∂skuna</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      background: linear-gradient(to bottom, #f8f7f4 0%, #e8e6e1 100%);
      min-height: 100vh;
      margin: 0;
      padding: 0;
    }
    
    .item-card {
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: grab;
      user-select: none;
    }
    
    .item-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    
    .item-card:active {
      cursor: grabbing;
    }
    
    .item-card.correct {
      background: #dcfce7 !important;
      border-color: #22c55e !important;
    }
    
    .item-card.wrong {
      background: #fee2e2 !important;
      border-color: #ef4444 !important;
      animation: shake 0.5s;
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    
    .backpack {
      min-height: 200px;
      transition: background-color 0.3s;
    }
    
    .backpack.drag-over {
      background-color: #dbeafe !important;
      border-color: #3b82f6 !important;
    }
    
    .pulse {
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const SCENARIOS = [
      {
        id: 1,
        title: '‚òÄÔ∏è Sumardagur √≠ fjallg√∂ngu',
        description: '√û√∫ √¶tlar √≠ 4 t√≠ma g√∂ngu √° Esju. √ûa√∞ er s√≥lskin og 15 gr√°√∞ur.',
        weather: '‚òÄÔ∏è S√≥lskin, 15¬∞C',
        correctItems: ['bakpoki', 'g√∂ngusk√≥r', 'vatnsflaska', 'nesti', 's√≥l'],
        wrongItems: ['tjald', 'snj√≥r', 'rigning', '√æoka', 'g√∂ngustafir', 'hlaupahj√≥l', 'ferja'],
        explanation: '√ç stutta fjallg√∂ngu √≠ g√≥√∞u ve√∞ri √æarftu: bakpoka, g√∂ngusk√≥, vatnsfl√∂sku og nesti. S√≥lin er l√≠ka √≠ ve√∞rinu!'
      },
      {
        id: 2,
        title: 'üåßÔ∏è Rigningardagur vi√∞ fossinn',
        description: '√û√∫ √¶tlar a√∞ heims√¶kja Gullfoss. √ûa√∞ er rigning og rok.',
        weather: 'üåßÔ∏è Rigning og rok',
        correctItems: ['rigning', 'rok', 'foss', 'vatnsflaska', 'bakpoki'],
        wrongItems: ['s√≥l', 'logn', 'tjald', 'g√∂ngusk√≥r', 'nesti', 'snj√≥r'],
        explanation: '√ûegar √æa√∞ rignir og rokkar vi√∞ foss √æarftu a√∞ vera me√∞vitu√∞ um rigninguna og roki√∞!'
      },
      {
        id: 3,
        title: '‚õ∫ Tjalda√∞ √≠ √û√≥rsm√∂rk',
        description: '√û√∫ √¶tlar a√∞ tjalda √≠ 2 n√¶tur √≠ √û√≥rsm√∂rk. Gott ve√∞ur er sp√°√∞.',
        weather: '‚òÄÔ∏è Gott ve√∞ur, 12¬∞C',
        correctItems: ['tjald', 'bakpoki', 'nesti', 'vatnsflaska', 'g√∂ngusk√≥r', 'g√∂ngustafir'],
        wrongItems: ['ferja', 'b√°tur', 'r√∫ta', 'b√≠ll', 'hlaupahj√≥l', 'rigning'],
        explanation: '√ç √∫tilegu √æarftu tjald, bakpoka, nesti, vatnsfl√∂sku, g√∂ngusk√≥ og kannski g√∂ngustafi!'
      },
      {
        id: 4,
        title: '‚õ¥Ô∏è Fer√∞alag til Vestmannaeyja',
        description: '√û√∫ tekur ferju til eyju. √û√∫ √¶tlar a√∞ sj√° selina.',
        weather: 'üå§Ô∏è L√©ttsk√Ωja√∞, logn',
        correctItems: ['ferja', 'eyja', 'selur', 'logn', 'b√°tur'],
        wrongItems: ['tjald', 'fjall', 'foss', 'sk√≥gur', 'g√∂ngustafir', 'r√∫ta'],
        explanation: 'Til a√∞ fara til eyju √æarftu ferju e√∞a b√°t. √ûar g√¶tir √æ√∫ s√©√∞ seli!'
      },
      {
        id: 5,
        title: '‚ùÑÔ∏è Vetrarfer√∞ um h√°lendi√∞',
        description: '√û√∫ keyrir um h√°lendi√∞ √≠ desember. Mikill snj√≥r og frost.',
        weather: '‚ùÑÔ∏è Snj√≥koma',
        correctItems: ['snj√≥r', 'snj√≥koma', 'b√≠ll', 'bakpoki', 'vatnsflaska'],
        wrongItems: ['s√≥l', 'rigning', 'g√∂ngusk√≥r', 'tjald', 'ferja', 'r√∫ta'],
        explanation: '√Å vetrarfer√∞ um h√°lendi√∞ er mikill snj√≥r og snj√≥koma. √û√∫ √æarft b√≠l!'
      },
      {
        id: 6,
        title: 'üèûÔ∏è Dagsfer√∞ √≠ sk√≥ginn',
        description: '√û√∫ √¶tlar √≠ g√∂ngufer√∞ √≠ Kjarnask√≥g. Ve√∞ur er gott.',
        weather: '‚òÄÔ∏è S√≥lskin og logn',
        correctItems: ['sk√≥gur', 'tr√©', 'gras', 'g√∂ngusk√≥r', 'nesti', 's√≥l', 'logn'],
        wrongItems: ['fjall', 'foss', 'eyja', 'ferja', 'tjald', 'snj√≥r'],
        explanation: '√ç sk√≥gi s√©r√∞u tr√© og gras. √û√∫ √æarft g√∂ngusk√≥ og nesti!'
      },
      {
        id: 7,
        title: 'üåà S√≥lskin eftir rigningu',
        description: '√ûa√∞ var a√∞ rigna en n√∫na er komi√∞ s√≥lskin. √û√∫ gengur a√∞ fossi.',
        weather: 'üåà S√≥lskin eftir rigningu',
        correctItems: ['s√≥l', 'regnbogi', 'foss', 'vatn', 'g√∂ngusk√≥r'],
        wrongItems: ['snj√≥r', '√æoka', 'rok', 'tjald', 'ferja', 'b√≠ll'],
        explanation: 'Eftir rigningu √≠ s√≥lskini s√©r√∞u oft regnboga! S√©rstaklega vi√∞ fossa me√∞ vatni.'
      },
      {
        id: 8,
        title: 'üå´Ô∏è √ûokukenndur morgunn vi√∞ fj√∂r√∞inn',
        description: '√û√∫ ert vi√∞ fallegan fj√∂r√∞. Mikil √æoka er um morguninn.',
        weather: 'üå´Ô∏è √ûoka og logn',
        correctItems: ['√æoka', 'fj√∂r√∞ur', 'vatn', 'logn', 'b√°tur'],
        wrongItems: ['s√≥l', 'rigning', 'vindur', 'rok', 'fjall', 'tjald'],
        explanation: 'Vi√∞ fj√∂r√∞ getur veri√∞ √æoka. √ûegar √æa√∞ er logn er vatni√∞ r√≥a√∞.'
      }
    ];

    const ALL_ITEMS = [
      { id: 'fjall', name: 'fjall', emoji: '‚õ∞Ô∏è' },
      { id: 'foss', name: 'foss', emoji: 'üíß' },
      { id: 'vatn', name: 'vatn', emoji: 'üí¶' },
      { id: 'sk√≥gur', name: 'sk√≥gur', emoji: 'üå≤' },
      { id: 'tr√©', name: 'tr√©', emoji: 'üå≥' },
      { id: 'gras', name: 'gras', emoji: 'üå±' },
      { id: 'steinn', name: 'steinn', emoji: 'ü™®' },
      { id: 'snj√≥r', name: 'snj√≥r', emoji: '‚ùÑÔ∏è' },
      { id: 's√≥l', name: 's√≥l', emoji: '‚òÄÔ∏è' },
      { id: 'vindur', name: 'vindur', emoji: 'üí®' },
      { id: 'rigning', name: 'rigning', emoji: 'üåßÔ∏è' },
      { id: 'snj√≥koma', name: 'snj√≥koma', emoji: 'üå®Ô∏è' },
      { id: 'tjald', name: 'tjald', emoji: '‚õ∫' },
      { id: 'bakpoki', name: 'bakpoki', emoji: 'üéí' },
      { id: 'r√∫ta', name: 'r√∫ta', emoji: 'üöå' },
      { id: 'b√≠ll', name: 'b√≠ll', emoji: 'üöó' },
      { id: 'b√°tur', name: 'b√°tur', emoji: '‚õµ' },
      { id: 'ferja', name: 'ferja', emoji: '‚õ¥Ô∏è' },
      { id: 'g√∂ngusk√≥r', name: 'g√∂ngusk√≥r', emoji: 'üëü' },
      { id: 'vatnsflaska', name: 'vatnsflaska', emoji: 'üßÉ' },
      { id: 'nesti', name: 'nesti', emoji: 'ü•™' },
      { id: 'rok', name: 'rok', emoji: 'üå¨Ô∏è' },
      { id: '√æoka', name: '√æoka', emoji: 'üå´Ô∏è' },
      { id: 'logn', name: 'logn', emoji: 'üòå' },
      { id: 'regnbogi', name: 'regnbogi', emoji: 'üåà' },
      { id: 'eyja', name: 'eyja', emoji: 'üèùÔ∏è' },
      { id: 'fj√∂r√∞ur', name: 'fj√∂r√∞ur', emoji: 'üåä' },
      { id: 'h√∂fn', name: 'h√∂fn', emoji: '‚öì' },
      { id: 'g√∂ngustafir', name: 'g√∂ngustafir', emoji: 'ü•¢' },
      { id: 'hlaupahj√≥l', name: 'hlaupahj√≥l', emoji: 'üõ¥' },
      { id: '√ærumur', name: '√ærumur', emoji: '‚ö°' },
      { id: 'eldingar', name: 'eldingar', emoji: 'üå©Ô∏è' },
      { id: 'selur', name: 'selur', emoji: 'ü¶≠' }
    ];

    const PackingGame = () => {
      const [currentScenario, setCurrentScenario] = useState(0);
      const [selectedItems, setSelectedItems] = useState([]);
      const [availableItems, setAvailableItems] = useState([]);
      const [showResult, setShowResult] = useState(false);
      const [score, setScore] = useState(0);
      const [feedback, setFeedback] = useState({ correct: [], wrong: [], missing: [] });
      const [gameFinished, setGameFinished] = useState(false);

      useEffect(() => {
        loadScenario();
      }, [currentScenario]);

      const loadScenario = () => {
        const scenario = SCENARIOS[currentScenario];
        const scenarioItems = [...scenario.correctItems, ...scenario.wrongItems];
        const shuffled = scenarioItems
          .map(itemId => ALL_ITEMS.find(item => item.id === itemId))
          .filter(Boolean)
          .sort(() => Math.random() - 0.5);
        
        setAvailableItems(shuffled);
        setSelectedItems([]);
        setShowResult(false);
        setFeedback({ correct: [], wrong: [], missing: [] });
      };

      const handleDragStart = (e, item) => {
        e.dataTransfer.setData('itemId', item.id);
      };

      const handleDrop = (e) => {
        e.preventDefault();
        const itemId = e.dataTransfer.getData('itemId');
        const item = availableItems.find(i => i.id === itemId);
        
        if (item && !selectedItems.find(i => i.id === itemId)) {
          setSelectedItems([...selectedItems, item]);
        }
        
        e.currentTarget.classList.remove('drag-over');
      };

      const handleDragOver = (e) => {
        e.preventDefault();
        e.currentTarget.classList.add('drag-over');
      };

      const handleDragLeave = (e) => {
        e.currentTarget.classList.remove('drag-over');
      };

      const removeItem = (itemId) => {
        setSelectedItems(selectedItems.filter(i => i.id !== itemId));
      };

      const checkAnswer = () => {
        const scenario = SCENARIOS[currentScenario];
        const selectedIds = selectedItems.map(i => i.id);
        
        const correct = selectedIds.filter(id => scenario.correctItems.includes(id));
        const wrong = selectedIds.filter(id => scenario.wrongItems.includes(id));
        const missing = scenario.correctItems.filter(id => !selectedIds.includes(id));
        
        setFeedback({ correct, wrong, missing });
        setShowResult(true);
        
        if (wrong.length === 0 && missing.length === 0) {
          setScore(score + 1);
        }
      };

      const nextScenario = () => {
        if (currentScenario < SCENARIOS.length - 1) {
          setCurrentScenario(currentScenario + 1);
        } else {
          setGameFinished(true);
        }
      };

      const resetGame = () => {
        setCurrentScenario(0);
        setScore(0);
        setGameFinished(false);
        loadScenario();
      };

      const scenario = SCENARIOS[currentScenario];

      if (gameFinished) {
        return (
          <div className="min-h-screen pb-12">
            <header className="bg-white shadow-sm border-b border-gray-200">
              <div className="max-w-4xl mx-auto px-6 py-8">
                <h1 className="text-3xl font-light text-gray-800 mb-2">üéí Pakka√∞u t√∂skuna</h1>
                <p className="text-gray-500 text-sm font-light">Kafli 5 - Esjan er falleg ¬∑ A1-A2</p>
              </div>
            </header>

            <main className="max-w-4xl mx-auto px-6 mt-8">
              <div className="bg-white rounded-lg shadow-xl p-12 text-center">
                <div className="text-6xl mb-6">üéâ</div>
                <h2 className="text-3xl font-light text-gray-800 mb-4">Til hamingju!</h2>
                <p className="text-xl text-gray-600 font-light mb-8">
                  √û√∫ kl√°ra√∞ir allar {SCENARIOS.length} a√∞st√¶√∞urnar!
                </p>
                <div className="text-5xl font-bold text-blue-600 mb-8">
                  {score} / {SCENARIOS.length}
                </div>
                <button
                  onClick={resetGame}
                  className="bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-normal hover:bg-blue-700 transition-colors"
                >
                  üîÑ Spila aftur
                </button>
              </div>
            </main>
          </div>
        );
      }

      return (
        <div className="min-h-screen pb-12">
          <header className="bg-white shadow-sm border-b border-gray-200">
            <div className="max-w-4xl mx-auto px-6 py-8">
              <button 
                onClick={() => window.history.back()} 
                className="text-sm text-gray-500 hover:text-gray-700 mb-2 inline-block font-light"
              >
                ‚Üê Til baka
              </button>
              <h1 className="text-3xl font-light text-gray-800 mb-2">üéí Pakka√∞u t√∂skuna</h1>
              <p className="text-gray-500 text-sm font-light">Kafli 5 - Esjan er falleg ¬∑ A1-A2</p>
            </div>
          </header>

          <main className="max-w-6xl mx-auto px-6 mt-8">
            
            {/* Progress */}
            <div className="bg-white rounded-lg shadow-sm p-4 mb-6">
              <div className="flex justify-between items-center">
                <span className="text-gray-600 font-light">
                  A√∞sta√∞a {currentScenario + 1} af {SCENARIOS.length}
                </span>
                <span className="text-gray-600 font-light">
                  Stig: <span className="font-normal text-blue-600">{score}</span> / {SCENARIOS.length}
                </span>
              </div>
              <div className="w-full bg-gray-200 rounded-full h-2 mt-3">
                <div 
                  className="bg-blue-600 h-2 rounded-full transition-all duration-500"
                  style={{ width: `${((currentScenario + 1) / SCENARIOS.length) * 100}%` }}
                ></div>
              </div>
            </div>

            {/* Lei√∞beiningar */}
            {currentScenario === 0 && !showResult && (
              <div className="bg-blue-50 border-2 border-blue-200 rounded-lg p-6 mb-6">
                <h2 className="text-xl font-normal text-gray-800 mb-3">üìù Hvernig √° a√∞ spila</h2>
                <ul className="space-y-2 text-gray-700 font-light">
                  <li>‚Ä¢ Lestu a√∞st√¶√∞urnar og ve√∞ri√∞</li>
                  <li>‚Ä¢ Drag√∞u or√∞in sem passa vi√∞ fer√∞alagi√∞ √≠ bakpokann</li>
                  <li>‚Ä¢ Smelltu √° "Athuga svar" √æegar √æ√∫ ert tilb√∫inn</li>
                  <li>‚Ä¢ Reyndu a√∞ velja √∂ll r√©ttu or√∞in!</li>
                </ul>
              </div>
            )}

            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
              
              {/* Vinstri hli√∞ - A√∞st√¶√∞ur og bakpoki */}
              <div>
                {/* Scenario Card */}
                <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                  <h2 className="text-2xl font-normal text-gray-800 mb-3">{scenario.title}</h2>
                  <p className="text-gray-700 font-light mb-4">{scenario.description}</p>
                  <div className="bg-blue-50 border-2 border-blue-200 rounded-lg p-4">
                    <p className="text-lg font-normal text-gray-800">{scenario.weather}</p>
                  </div>
                </div>

                {/* Backpack */}
                <div 
                  className="backpack bg-gradient-to-br from-amber-50 to-orange-50 border-4 border-amber-300 rounded-2xl p-6"
                  onDrop={handleDrop}
                  onDragOver={handleDragOver}
                  onDragLeave={handleDragLeave}
                >
                  <h3 className="text-xl font-normal text-gray-800 mb-4 text-center">
                    üéí Bakpokinn √æinn
                  </h3>
                  
                  {selectedItems.length === 0 && !showResult && (
                    <div className="text-center py-8 text-gray-400 font-light pulse">
                      Drag√∞u hlutina hinga√∞ ‚Üí
                    </div>
                  )}
                  
                  <div className="grid grid-cols-2 gap-3">
                    {selectedItems.map(item => {
                      let className = "item-card bg-white border-2 border-gray-300 rounded-lg p-4 text-center";
                      
                      if (showResult) {
                        if (feedback.correct.includes(item.id)) {
                          className += " correct";
                        } else if (feedback.wrong.includes(item.id)) {
                          className += " wrong";
                        }
                      }
                      
                      return (
                        <div key={item.id} className={className}>
                          <div className="text-3xl mb-2">{item.emoji}</div>
                          <div className="text-sm font-normal text-gray-800">{item.name}</div>
                          {!showResult && (
                            <button
                              onClick={() => removeItem(item.id)}
                              className="mt-2 text-xs text-red-600 hover:text-red-700"
                            >
                              ‚úï Fjarl√¶gja
                            </button>
                          )}
                        </div>
                      );
                    })}
                  </div>
                </div>

                {/* Action Button */}
                <div className="mt-6">
                  {!showResult ? (
                    <button
                      onClick={checkAnswer}
                      disabled={selectedItems.length === 0}
                      className={`w-full py-4 rounded-lg text-lg font-normal transition-colors ${
                        selectedItems.length === 0
                          ? 'bg-gray-300 text-gray-500 cursor-not-allowed'
                          : 'bg-green-600 text-white hover:bg-green-700'
                      }`}
                    >
                      ‚úì Athuga svar
                    </button>
                  ) : (
                    <button
                      onClick={nextScenario}
                      className="w-full bg-blue-600 text-white py-4 rounded-lg text-lg font-normal hover:bg-blue-700 transition-colors"
                    >
                      ‚Üí N√¶sta a√∞sta√∞a
                    </button>
                  )}
                </div>
              </div>

              {/* H√¶gri hli√∞ - Tilt√¶k or√∞ */}
              <div>
                <div className="bg-white rounded-lg shadow-lg p-6">
                  <h3 className="text-xl font-normal text-gray-800 mb-4">üì¶ Tilt√¶k or√∞</h3>
                  <div className="grid grid-cols-2 gap-3">
                    {availableItems.map(item => {
                      const isSelected = selectedItems.find(i => i.id === item.id);
                      
                      return (
                        <div
                          key={item.id}
                          draggable={!isSelected && !showResult}
                          onDragStart={(e) => handleDragStart(e, item)}
                          className={`item-card border-2 rounded-lg p-4 text-center ${
                            isSelected 
                              ? 'bg-gray-100 border-gray-200 opacity-50' 
                              : 'bg-white border-gray-300'
                          }`}
                          style={{ cursor: isSelected || showResult ? 'not-allowed' : 'grab' }}
                        >
                          <div className="text-3xl mb-2">{item.emoji}</div>
                          <div className="text-sm font-normal text-gray-800">{item.name}</div>
                        </div>
                      );
                    })}
                  </div>
                </div>

                {/* Feedback */}
                {showResult && (
                  <div className="mt-6 bg-white rounded-lg shadow-lg p-6">
                    <h3 className="text-xl font-normal text-gray-800 mb-4">üìä Ni√∞ursta√∞a</h3>
                    
                    {feedback.wrong.length === 0 && feedback.missing.length === 0 ? (
                      <div className="bg-green-50 border-2 border-green-300 rounded-lg p-4 mb-4">
                        <p className="text-green-800 font-normal text-center text-lg">
                          üéâ Fr√°b√¶rt! Allt r√©tt!
                        </p>
                      </div>
                    ) : (
                      <div className="bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4 mb-4">
                        <p className="text-yellow-800 font-normal text-center">
                          üí™ √û√∫ getur gert √æetta betur!
                        </p>
                      </div>
                    )}

                    {feedback.correct.length > 0 && (
                      <div className="mb-3">
                        <p className="text-sm font-normal text-green-700 mb-2">‚úì R√©tt or√∞:</p>
                        <div className="flex flex-wrap gap-2">
                          {feedback.correct.map(id => {
                            const item = ALL_ITEMS.find(i => i.id === id);
                            return (
                              <span key={id} className="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">
                                {item.emoji} {item.name}
                              </span>
                            );
                          })}
                        </div>
                      </div>
                    )}

                    {feedback.wrong.length > 0 && (
                      <div className="mb-3">
                        <p className="text-sm font-normal text-red-700 mb-2">‚úó Rangt or√∞:</p>
                        <div className="flex flex-wrap gap-2">
                          {feedback.wrong.map(id => {
                            const item = ALL_ITEMS.find(i => i.id === id);
                            return (
                              <span key={id} className="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm">
                                {item.emoji} {item.name}
                              </span>
                            );
                          })}
                        </div>
                      </div>
                    )}

                    {feedback.missing.length > 0 && (
                      <div className="mb-3">
                        <p className="text-sm font-normal text-orange-700 mb-2">‚ö† Or√∞ sem vantar:</p>
                        <div className="flex flex-wrap gap-2">
                          {feedback.missing.map(id => {
                            const item = ALL_ITEMS.find(i => i.id === id);
                            return (
                              <span key={id} className="bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm">
                                {item.emoji} {item.name}
                              </span>
                            );
                          })}
                        </div>
                      </div>
                    )}

                    <div className="mt-4 pt-4 border-t border-gray-200">
                      <p className="text-sm text-gray-600 font-light italic">
                        üí° {scenario.explanation}
                      </p>
                    </div>
                  </div>
                )}
              </div>
            </div>
          </main>
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<PackingGame />);
  </script>
</body>
</html>
